{"ast":null,"code":"import React,{useState,useEffect}from'react';import{TreeNode}from'./TreeNode';import{AddItemInput}from'./AddItemInput';import{AICardForm}from'./AICardForm';import{CardDetail}from'./CardDetail';import{CategoryView}from'./CategoryView';import{ChevronRight,ChevronDown,Folder,Plus,Hash,Tag,FileText,Check,X}from'lucide-react';import{DropdownMenu,createEditAction,createDeleteAction,createAICardAction}from'./DropdownMenu';import{handleConditionalDelete}from'../utils/deleteUtils';import{apiClient}from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const CategoryNode=_ref=>{let{category,onToggle,onRename,onDelete,onAddChild,onMove,onCategoryUpdate,onCategoryRefresh,categories=[]}=_ref;const[isEditing,setIsEditing]=useState(false);const[editName,setEditName]=useState(category.name);const[showAddInput,setShowAddInput]=useState(false);const[addType,setAddType]=useState('folder');const[isDeleting,setIsDeleting]=useState(false);const[isSaving,setIsSaving]=useState(false);const[showAICardForm,setShowAICardForm]=useState(false);const[selectedCardId,setSelectedCardId]=useState(null);const[showCategoryView,setShowCategoryView]=useState(false);const[dragOverCategory,setDragOverCategory]=useState(false);// Sync editName with category.name when category changes\nuseEffect(()=>{if(!isEditing){setEditName(category.name);}},[category.name,isEditing]);const handleRename=async()=>{if(!editName.trim()){setEditName(category.name);setIsEditing(false);return;}if(editName.trim()===category.name){setIsEditing(false);return;}try{setIsSaving(true);await apiClient.updateCategory(category.id,{name:editName.trim()});onRename(category.id,editName.trim());setIsEditing(false);}catch(err){console.error('Error renaming category:',err);setEditName(category.name);// Reset on error\nalert('Failed to rename category. Please try again.');}finally{setIsSaving(false);}};const handleCancelEdit=()=>{setEditName(category.name);setIsEditing(false);};const handleKeyDown=e=>{if(e.key==='Enter'){e.preventDefault();handleRename();}else if(e.key==='Escape'){handleCancelEdit();}};const handleBlur=e=>{// Only save on blur if the user didn't click the save/cancel buttons\n// Check if the related target is one of our buttons\nconst relatedTarget=e.relatedTarget;if(relatedTarget&&(relatedTarget.closest('.edit-actions')||relatedTarget.closest('button'))){return;// Don't save if clicking a button\n}// Small delay to allow button clicks to register\nsetTimeout(()=>{if(isEditing){handleRename();}},200);};const handleDelete=async()=>{// Create a temporary TreeItem structure for the category to use with conditional delete\nconst categoryAsTreeItem={id:category.id,name:category.name,type:'folder',parent_id:null,is_folder:true,children:category.children,isExpanded:category.isExpanded,isCategory:true// Add flag to identify this as a category\n};try{setIsDeleting(true);await handleConditionalDelete(categoryAsTreeItem,()=>{// Category deletion should refresh the entire category list\nonCategoryUpdate();},error=>{console.error('Error deleting category:',error);alert('Failed to delete category');});}finally{setIsDeleting(false);}};const handleAddChild=async name=>{try{await apiClient.createCard({name,parent_id:null,// Root level items in category\nis_folder:addType==='folder',category_id:category.id});// Refresh only this specific category\nonCategoryRefresh(category.id);setShowAddInput(false);}catch(err){console.error('Error adding child:',err);alert('Failed to add item');}};const handleAddChildToFolder=async(parentId,type,name)=>{try{await apiClient.createCard({name,parent_id:parentId,// Set the folder as parent\nis_folder:type==='folder',category_id:category.id// Keep the same category\n});// Refresh the category to show the new card, and expand the parent folder\nonCategoryRefresh(category.id,parentId);}catch(err){var _err$response,_err$response$data;console.error('Error adding child to folder:',err);const errorMessage=err.message||((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.detail)||'Failed to add item';alert(\"Failed to add item: \".concat(errorMessage));}};const handleAddFolder=()=>{setAddType('folder');setShowAddInput(true);};const handleAddCard=()=>{setAddType('card');setShowAddInput(true);};const handleAICardSuccess=cardId=>{setShowAICardForm(false);setSelectedCardId(cardId);// Refresh the category to show the new card\nonCategoryRefresh(category.id);};const handleCardDetailClose=()=>{setSelectedCardId(null);};const handleCardDetailSave=()=>{// Refresh the category after saving\nonCategoryRefresh(category.id);};// Drag and drop handlers for category\nconst handleCategoryDragOver=e=>{e.preventDefault();e.stopPropagation();e.dataTransfer.dropEffect='move';setDragOverCategory(true);};const handleCategoryDragLeave=e=>{e.preventDefault();setDragOverCategory(false);};const handleCategoryDrop=async e=>{e.preventDefault();e.stopPropagation();setDragOverCategory(false);try{const dragData=JSON.parse(e.dataTransfer.getData('application/json'));const draggedItemId=dragData.id;// Move to this category\nawait onMove(draggedItemId,{category_id:category.id,parent_id:null});}catch(err){var _err$response2,_err$response2$data;console.error('Error handling category drop:',err);alert(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.detail)||'Failed to move item');}};// Create dropdown menu items for category\nconst getCategoryDropdownItems=()=>{return[createEditAction(()=>setIsEditing(true)),createAICardAction(()=>setShowAICardForm(true)),createDeleteAction(handleDelete)];};// Calculate total items in category\nconst totalItems=category.children.length;const folderCount=category.children.filter(child=>child.is_folder).length;const cardCount=category.children.filter(child=>!child.is_folder).length;return/*#__PURE__*/_jsxs(\"div\",{className:\"border border-gray-200 rounded-xl mb-6 bg-white shadow-sm hover:shadow-md transition-shadow\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"group flex items-center py-4 px-5 hover:bg-purple-50 rounded-t-xl border-b border-gray-100 bg-gradient-to-r from-purple-50 to-indigo-50 \".concat(dragOverCategory?'bg-green-100 border-green-400 border-2':''),onDragOver:handleCategoryDragOver,onDragLeave:handleCategoryDragLeave,onDrop:handleCategoryDrop,children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center flex-1 min-w-0\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();onToggle(category.id);},className:\"mr-4 p-2 hover:bg-purple-100 rounded-lg transition-colors\",children:category.isExpanded?/*#__PURE__*/_jsx(ChevronDown,{className:\"h-5 w-5 text-purple-600\"}):/*#__PURE__*/_jsx(ChevronRight,{className:\"h-5 w-5 text-purple-600\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"mr-4 flex-shrink-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-2 bg-purple-100 rounded-lg\",children:/*#__PURE__*/_jsx(Tag,{className:\"h-6 w-6 text-purple-600\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 min-w-0 cursor-pointer\",onClick:e=>{if(!isEditing&&e.target.closest('button')===null){setShowCategoryView(true);}},children:isEditing?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editName,onChange:e=>setEditName(e.target.value),onBlur:handleBlur,onKeyDown:handleKeyDown,className:\"flex-1 border border-purple-300 rounded-md px-3 py-1 text-xl font-bold bg-white text-purple-900 focus:outline-none focus:ring-2 focus:ring-purple-500\",autoFocus:true,disabled:isSaving}),/*#__PURE__*/_jsxs(\"div\",{className:\"edit-actions flex items-center space-x-1\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleRename,disabled:isSaving||!editName.trim(),className:\"p-1.5 hover:bg-green-100 rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed\",title:\"Save\",children:/*#__PURE__*/_jsx(Check,{className:\"h-5 w-5 text-green-600\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCancelEdit,disabled:isSaving,className:\"p-1.5 hover:bg-red-100 rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed\",title:\"Cancel\",children:/*#__PURE__*/_jsx(X,{className:\"h-5 w-5 text-red-600\"})})]})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-purple-900 truncate\",children:category.name}),totalItems>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4 mt-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"hidden lg:flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm text-purple-600\",children:[/*#__PURE__*/_jsx(Hash,{className:\"h-3 w-3 mr-1\"}),/*#__PURE__*/_jsxs(\"span\",{children:[totalItems,\" total\"]})]}),folderCount>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm text-blue-600\",children:[/*#__PURE__*/_jsx(Folder,{className:\"h-3 w-3 mr-1\"}),/*#__PURE__*/_jsxs(\"span\",{children:[folderCount,\" folders\"]})]}),cardCount>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(Hash,{className:\"h-3 w-3 mr-1\"}),/*#__PURE__*/_jsxs(\"span\",{children:[cardCount,\" cards\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"lg:hidden stats flex items-center space-x-3\",children:[folderCount>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center bg-blue-50 px-2 py-1 rounded-md\",children:[/*#__PURE__*/_jsx(Folder,{className:\"h-3 w-3 text-blue-600 mr-1\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-medium text-blue-700\",children:folderCount})]}),cardCount>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center bg-gray-50 px-2 py-1 rounded-md\",children:[/*#__PURE__*/_jsx(FileText,{className:\"h-3 w-3 text-gray-600 mr-1\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-medium text-gray-700\",children:cardCount})]})]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleAddFolder,className:\"p-2 hover:bg-blue-100 rounded-lg bg-blue-50 transition-colors\",title:\"Add folder\",children:/*#__PURE__*/_jsx(Folder,{className:\"h-4 w-4 text-blue-600\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddCard,className:\"p-2 hover:bg-gray-200 rounded-lg bg-gray-100 transition-colors\",title:\"Add card\",children:/*#__PURE__*/_jsx(Plus,{className:\"h-4 w-4 text-gray-700\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-3\",children:/*#__PURE__*/_jsx(DropdownMenu,{items:getCategoryDropdownItems(),className:\"opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity\",disabled:isDeleting})})]})}),showAddInput&&/*#__PURE__*/_jsx(\"div\",{className:\"px-5 py-4 bg-gray-50 border-b border-gray-100\",children:/*#__PURE__*/_jsx(AddItemInput,{parentId:category.id,type:addType,onSubmit:handleAddChild,onCancel:()=>setShowAddInput(false),placeholder:\"Add \".concat(addType,\"...\")})}),category.isExpanded&&category.children.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"p-5 bg-gray-50/30\",children:/*#__PURE__*/_jsx(\"div\",{className:\"space-y-1\",children:category.children.map(child=>/*#__PURE__*/_jsx(TreeNode,{item:child,onToggle:onToggle,onRename:onRename,onDelete:onDelete,onAddChild:handleAddChildToFolder,onMove:onMove,level:0,categoryId:category.id,categories:categories},child.id))})}),category.isExpanded&&category.children.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"p-12 text-center text-gray-500 bg-gray-50/30\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-4 bg-white rounded-full w-20 h-20 mx-auto mb-4 flex items-center justify-center\",children:/*#__PURE__*/_jsx(Tag,{className:\"h-8 w-8 text-purple-300\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-medium text-gray-600 mb-2\",children:\"No items in this category yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mb-4\",children:\"Add folders or cards to get started\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleAddFolder,className:\"px-4 py-2 text-sm font-medium text-blue-600 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors\",children:\"Add Folder\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddCard,className:\"px-4 py-2 text-sm font-medium text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors\",children:\"Add Card\"})]})]}),showAICardForm&&/*#__PURE__*/_jsx(AICardForm,{categoryId:category.id,categoryName:category.name,onClose:()=>setShowAICardForm(false),onSuccess:handleAICardSuccess}),selectedCardId!==null&&/*#__PURE__*/_jsx(CardDetail,{cardId:selectedCardId,onClose:handleCardDetailClose,onSave:handleCardDetailSave}),showCategoryView&&/*#__PURE__*/_jsx(CategoryView,{category:category,onClose:()=>setShowCategoryView(false),onRename:onRename,onDelete:onDelete,onMove:onMove,onCategoryRefresh:onCategoryRefresh,categories:categories})]});};","map":{"version":3,"names":["React","useState","useEffect","TreeNode","AddItemInput","AICardForm","CardDetail","CategoryView","ChevronRight","ChevronDown","Folder","Plus","Hash","Tag","FileText","Check","X","DropdownMenu","createEditAction","createDeleteAction","createAICardAction","handleConditionalDelete","apiClient","jsx","_jsx","jsxs","_jsxs","CategoryNode","_ref","category","onToggle","onRename","onDelete","onAddChild","onMove","onCategoryUpdate","onCategoryRefresh","categories","isEditing","setIsEditing","editName","setEditName","name","showAddInput","setShowAddInput","addType","setAddType","isDeleting","setIsDeleting","isSaving","setIsSaving","showAICardForm","setShowAICardForm","selectedCardId","setSelectedCardId","showCategoryView","setShowCategoryView","dragOverCategory","setDragOverCategory","handleRename","trim","updateCategory","id","err","console","error","alert","handleCancelEdit","handleKeyDown","e","key","preventDefault","handleBlur","relatedTarget","closest","setTimeout","handleDelete","categoryAsTreeItem","type","parent_id","is_folder","children","isExpanded","isCategory","handleAddChild","createCard","category_id","handleAddChildToFolder","parentId","_err$response","_err$response$data","errorMessage","message","response","data","detail","concat","handleAddFolder","handleAddCard","handleAICardSuccess","cardId","handleCardDetailClose","handleCardDetailSave","handleCategoryDragOver","stopPropagation","dataTransfer","dropEffect","handleCategoryDragLeave","handleCategoryDrop","dragData","JSON","parse","getData","draggedItemId","_err$response2","_err$response2$data","getCategoryDropdownItems","totalItems","length","folderCount","filter","child","cardCount","className","onDragOver","onDragLeave","onDrop","onClick","target","value","onChange","onBlur","onKeyDown","autoFocus","disabled","title","items","onSubmit","onCancel","placeholder","map","item","level","categoryId","categoryName","onClose","onSuccess","onSave"],"sources":["/Users/tassiobs/Documents/vocatree-fe/src/components/CategoryNode.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { CategoryItem } from '../types';\nimport { TreeNode } from './TreeNode';\nimport { AddItemInput } from './AddItemInput';\nimport { AICardForm } from './AICardForm';\nimport { CardDetail } from './CardDetail';\nimport { CategoryView } from './CategoryView';\nimport { \n  ChevronRight, \n  ChevronDown, \n  Folder, \n  Plus,\n  Hash,\n  Tag,\n  FileText,\n  Check,\n  X\n} from 'lucide-react';\nimport { DropdownMenu, DropdownMenuItem, createEditAction, createDeleteAction, createAICardAction } from './DropdownMenu';\nimport { handleConditionalDelete } from '../utils/deleteUtils';\nimport { apiClient } from '../services/api';\n\ninterface CategoryNodeProps {\n  category: CategoryItem;\n  onToggle: (id: number) => void;\n  onRename: (id: number, newName: string) => void;\n  onDelete: (id: number) => void;\n  onAddChild: (parentId: number, type: 'folder' | 'card', name: string) => void;\n  onMove: (itemId: number, data: { parent_id?: number | null; category_id?: number | null }) => Promise<void>;\n  onCategoryUpdate: () => void;\n  onCategoryRefresh: (categoryId: number, expandFolderId?: number) => void;\n  categories?: CategoryItem[];\n}\n\nexport const CategoryNode: React.FC<CategoryNodeProps> = ({\n  category,\n  onToggle,\n  onRename,\n  onDelete,\n  onAddChild,\n  onMove,\n  onCategoryUpdate,\n  onCategoryRefresh,\n  categories = [],\n}) => {\n  const [isEditing, setIsEditing] = useState(false);\n  const [editName, setEditName] = useState(category.name);\n  const [showAddInput, setShowAddInput] = useState(false);\n  const [addType, setAddType] = useState<'folder' | 'card'>('folder');\n  const [isDeleting, setIsDeleting] = useState(false);\n  const [isSaving, setIsSaving] = useState(false);\n  const [showAICardForm, setShowAICardForm] = useState(false);\n  const [selectedCardId, setSelectedCardId] = useState<number | null>(null);\n  const [showCategoryView, setShowCategoryView] = useState(false);\n  const [dragOverCategory, setDragOverCategory] = useState(false);\n\n  // Sync editName with category.name when category changes\n  useEffect(() => {\n    if (!isEditing) {\n      setEditName(category.name);\n    }\n  }, [category.name, isEditing]);\n\n  const handleRename = async () => {\n    if (!editName.trim()) {\n      setEditName(category.name);\n      setIsEditing(false);\n      return;\n    }\n\n    if (editName.trim() === category.name) {\n      setIsEditing(false);\n      return;\n    }\n\n    try {\n      setIsSaving(true);\n      await apiClient.updateCategory(category.id, { name: editName.trim() });\n      onRename(category.id, editName.trim());\n      setIsEditing(false);\n    } catch (err: any) {\n      console.error('Error renaming category:', err);\n      setEditName(category.name); // Reset on error\n      alert('Failed to rename category. Please try again.');\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  const handleCancelEdit = () => {\n    setEditName(category.name);\n    setIsEditing(false);\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      handleRename();\n    } else if (e.key === 'Escape') {\n      handleCancelEdit();\n    }\n  };\n\n  const handleBlur = (e: React.FocusEvent<HTMLInputElement>) => {\n    // Only save on blur if the user didn't click the save/cancel buttons\n    // Check if the related target is one of our buttons\n    const relatedTarget = e.relatedTarget as HTMLElement;\n    if (relatedTarget && (relatedTarget.closest('.edit-actions') || relatedTarget.closest('button'))) {\n      return; // Don't save if clicking a button\n    }\n    // Small delay to allow button clicks to register\n    setTimeout(() => {\n      if (isEditing) {\n        handleRename();\n      }\n    }, 200);\n  };\n\n  const handleDelete = async () => {\n    // Create a temporary TreeItem structure for the category to use with conditional delete\n    const categoryAsTreeItem = {\n      id: category.id,\n      name: category.name,\n      type: 'folder' as const,\n      parent_id: null,\n      is_folder: true,\n      children: category.children,\n      isExpanded: category.isExpanded,\n      isCategory: true, // Add flag to identify this as a category\n    };\n\n    try {\n      setIsDeleting(true);\n      await handleConditionalDelete(\n        categoryAsTreeItem,\n        () => {\n          // Category deletion should refresh the entire category list\n          onCategoryUpdate();\n        },\n        (error) => {\n          console.error('Error deleting category:', error);\n          alert('Failed to delete category');\n        }\n      );\n    } finally {\n      setIsDeleting(false);\n    }\n  };\n\n  const handleAddChild = async (name: string) => {\n    try {\n      await apiClient.createCard({\n        name,\n        parent_id: null, // Root level items in category\n        is_folder: addType === 'folder',\n        category_id: category.id,\n      });\n\n      // Refresh only this specific category\n      onCategoryRefresh(category.id);\n      setShowAddInput(false);\n    } catch (err: any) {\n      console.error('Error adding child:', err);\n      alert('Failed to add item');\n    }\n  };\n\n  const handleAddChildToFolder = async (parentId: number, type: 'folder' | 'card', name: string) => {\n    try {\n      await apiClient.createCard({\n        name,\n        parent_id: parentId, // Set the folder as parent\n        is_folder: type === 'folder',\n        category_id: category.id, // Keep the same category\n      });\n\n      // Refresh the category to show the new card, and expand the parent folder\n      onCategoryRefresh(category.id, parentId);\n    } catch (err: any) {\n      console.error('Error adding child to folder:', err);\n      const errorMessage = err.message || err.response?.data?.detail || 'Failed to add item';\n      alert(`Failed to add item: ${errorMessage}`);\n    }\n  };\n\n  const handleAddFolder = () => {\n    setAddType('folder');\n    setShowAddInput(true);\n  };\n\n  const handleAddCard = () => {\n    setAddType('card');\n    setShowAddInput(true);\n  };\n\n  const handleAICardSuccess = (cardId: number) => {\n    setShowAICardForm(false);\n    setSelectedCardId(cardId);\n    // Refresh the category to show the new card\n    onCategoryRefresh(category.id);\n  };\n\n  const handleCardDetailClose = () => {\n    setSelectedCardId(null);\n  };\n\n  const handleCardDetailSave = () => {\n    // Refresh the category after saving\n    onCategoryRefresh(category.id);\n  };\n\n  // Drag and drop handlers for category\n  const handleCategoryDragOver = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    e.dataTransfer.dropEffect = 'move';\n    setDragOverCategory(true);\n  };\n\n  const handleCategoryDragLeave = (e: React.DragEvent) => {\n    e.preventDefault();\n    setDragOverCategory(false);\n  };\n\n  const handleCategoryDrop = async (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setDragOverCategory(false);\n    \n    try {\n      const dragData = JSON.parse(e.dataTransfer.getData('application/json'));\n      const draggedItemId = dragData.id;\n      \n      // Move to this category\n      await onMove(draggedItemId, { category_id: category.id, parent_id: null });\n    } catch (err: any) {\n      console.error('Error handling category drop:', err);\n      alert(err.response?.data?.detail || 'Failed to move item');\n    }\n  };\n\n  // Create dropdown menu items for category\n  const getCategoryDropdownItems = (): DropdownMenuItem[] => {\n    return [\n      createEditAction(() => setIsEditing(true)),\n      createAICardAction(() => setShowAICardForm(true)),\n      createDeleteAction(handleDelete),\n    ];\n  };\n\n  // Calculate total items in category\n  const totalItems = category.children.length;\n  const folderCount = category.children.filter(child => child.is_folder).length;\n  const cardCount = category.children.filter(child => !child.is_folder).length;\n\n  return (\n    <div className=\"border border-gray-200 rounded-xl mb-6 bg-white shadow-sm hover:shadow-md transition-shadow\">\n      {/* Category Header */}\n      <div \n        className={`group flex items-center py-4 px-5 hover:bg-purple-50 rounded-t-xl border-b border-gray-100 bg-gradient-to-r from-purple-50 to-indigo-50 ${\n          dragOverCategory ? 'bg-green-100 border-green-400 border-2' : ''\n        }`}\n        onDragOver={handleCategoryDragOver}\n        onDragLeave={handleCategoryDragLeave}\n        onDrop={handleCategoryDrop}\n      >\n        <div className=\"flex items-center flex-1 min-w-0\">\n          {/* Expand/collapse button */}\n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              onToggle(category.id);\n            }}\n            className=\"mr-4 p-2 hover:bg-purple-100 rounded-lg transition-colors\"\n          >\n            {category.isExpanded ? (\n              <ChevronDown className=\"h-5 w-5 text-purple-600\" />\n            ) : (\n              <ChevronRight className=\"h-5 w-5 text-purple-600\" />\n            )}\n          </button>\n\n          {/* Category Icon */}\n          <div className=\"mr-4 flex-shrink-0\">\n            <div className=\"p-2 bg-purple-100 rounded-lg\">\n              <Tag className=\"h-6 w-6 text-purple-600\" />\n            </div>\n          </div>\n\n          {/* Category Name and Stats */}\n          <div \n            className=\"flex-1 min-w-0 cursor-pointer\" \n            onClick={(e) => {\n              if (!isEditing && (e.target as HTMLElement).closest('button') === null) {\n                setShowCategoryView(true);\n              }\n            }}\n          >\n            {isEditing ? (\n              <div className=\"flex items-center space-x-2\">\n                <input\n                  type=\"text\"\n                  value={editName}\n                  onChange={(e) => setEditName(e.target.value)}\n                  onBlur={handleBlur}\n                  onKeyDown={handleKeyDown}\n                  className=\"flex-1 border border-purple-300 rounded-md px-3 py-1 text-xl font-bold bg-white text-purple-900 focus:outline-none focus:ring-2 focus:ring-purple-500\"\n                  autoFocus\n                  disabled={isSaving}\n                />\n                <div className=\"edit-actions flex items-center space-x-1\">\n                  <button\n                    onClick={handleRename}\n                    disabled={isSaving || !editName.trim()}\n                    className=\"p-1.5 hover:bg-green-100 rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n                    title=\"Save\"\n                  >\n                    <Check className=\"h-5 w-5 text-green-600\" />\n                  </button>\n                  <button\n                    onClick={handleCancelEdit}\n                    disabled={isSaving}\n                    className=\"p-1.5 hover:bg-red-100 rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n                    title=\"Cancel\"\n                  >\n                    <X className=\"h-5 w-5 text-red-600\" />\n                  </button>\n                </div>\n              </div>\n            ) : (\n              <div>\n                <h3 className=\"text-xl font-bold text-purple-900 truncate\">\n                  {category.name}\n                </h3>\n                {totalItems > 0 && (\n                  <div className=\"flex items-center space-x-4 mt-1\">\n                    {/* Desktop stats - show text labels */}\n                    <div className=\"hidden lg:flex items-center space-x-4\">\n                      <div className=\"flex items-center text-sm text-purple-600\">\n                        <Hash className=\"h-3 w-3 mr-1\" />\n                        <span>{totalItems} total</span>\n                      </div>\n                      {folderCount > 0 && (\n                        <div className=\"flex items-center text-sm text-blue-600\">\n                          <Folder className=\"h-3 w-3 mr-1\" />\n                          <span>{folderCount} folders</span>\n                        </div>\n                      )}\n                      {cardCount > 0 && (\n                        <div className=\"flex items-center text-sm text-gray-600\">\n                          <Hash className=\"h-3 w-3 mr-1\" />\n                          <span>{cardCount} cards</span>\n                        </div>\n                      )}\n                    </div>\n                    \n                    {/* Mobile stats - icon + number only */}\n                    <div className=\"lg:hidden stats flex items-center space-x-3\">\n                      {folderCount > 0 && (\n                        <div className=\"flex items-center bg-blue-50 px-2 py-1 rounded-md\">\n                          <Folder className=\"h-3 w-3 text-blue-600 mr-1\" />\n                          <span className=\"text-xs font-medium text-blue-700\">{folderCount}</span>\n                        </div>\n                      )}\n                      {cardCount > 0 && (\n                        <div className=\"flex items-center bg-gray-50 px-2 py-1 rounded-md\">\n                          <FileText className=\"h-3 w-3 text-gray-600 mr-1\" />\n                          <span className=\"text-xs font-medium text-gray-700\">{cardCount}</span>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n\n          {/* Add buttons - always visible for categories */}\n          <div className=\"flex items-center space-x-2\">\n            <button\n              onClick={handleAddFolder}\n              className=\"p-2 hover:bg-blue-100 rounded-lg bg-blue-50 transition-colors\"\n              title=\"Add folder\"\n            >\n              <Folder className=\"h-4 w-4 text-blue-600\" />\n            </button>\n            <button\n              onClick={handleAddCard}\n              className=\"p-2 hover:bg-gray-200 rounded-lg bg-gray-100 transition-colors\"\n              title=\"Add card\"\n            >\n              <Plus className=\"h-4 w-4 text-gray-700\" />\n            </button>\n          </div>\n\n          {/* Actions dropdown menu */}\n          <div className=\"ml-3\">\n            <DropdownMenu\n              items={getCategoryDropdownItems()}\n              className=\"opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity\"\n              disabled={isDeleting}\n            />\n          </div>\n        </div>\n      </div>\n\n      {/* Add item input */}\n      {showAddInput && (\n        <div className=\"px-5 py-4 bg-gray-50 border-b border-gray-100\">\n          <AddItemInput\n            parentId={category.id}\n            type={addType}\n            onSubmit={handleAddChild}\n            onCancel={() => setShowAddInput(false)}\n            placeholder={`Add ${addType}...`}\n          />\n        </div>\n      )}\n\n      {/* Category Children */}\n      {category.isExpanded && category.children.length > 0 && (\n        <div className=\"p-5 bg-gray-50/30\">\n          <div className=\"space-y-1\">\n            {category.children.map((child) => (\n              <TreeNode\n                key={child.id}\n                item={child}\n                onToggle={onToggle}\n                onRename={onRename}\n                onDelete={onDelete}\n                onAddChild={handleAddChildToFolder}\n                onMove={onMove}\n                level={0}\n                categoryId={category.id}\n                categories={categories}\n              />\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Empty state */}\n      {category.isExpanded && category.children.length === 0 && (\n        <div className=\"p-12 text-center text-gray-500 bg-gray-50/30\">\n          <div className=\"p-4 bg-white rounded-full w-20 h-20 mx-auto mb-4 flex items-center justify-center\">\n            <Tag className=\"h-8 w-8 text-purple-300\" />\n          </div>\n          <p className=\"text-lg font-medium text-gray-600 mb-2\">No items in this category yet</p>\n          <p className=\"text-sm text-gray-500 mb-4\">Add folders or cards to get started</p>\n          <div className=\"flex items-center justify-center space-x-2\">\n            <button\n              onClick={handleAddFolder}\n              className=\"px-4 py-2 text-sm font-medium text-blue-600 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors\"\n            >\n              Add Folder\n            </button>\n            <button\n              onClick={handleAddCard}\n              className=\"px-4 py-2 text-sm font-medium text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors\"\n            >\n              Add Card\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* AI Card Form Modal */}\n      {showAICardForm && (\n        <AICardForm\n          categoryId={category.id}\n          categoryName={category.name}\n          onClose={() => setShowAICardForm(false)}\n          onSuccess={handleAICardSuccess}\n        />\n      )}\n\n      {/* Card Detail Modal */}\n      {selectedCardId !== null && (\n        <CardDetail\n          cardId={selectedCardId}\n          onClose={handleCardDetailClose}\n          onSave={handleCardDetailSave}\n        />\n      )}\n\n      {/* Category View Modal */}\n      {showCategoryView && (\n        <CategoryView\n          category={category}\n          onClose={() => setShowCategoryView(false)}\n          onRename={onRename}\n          onDelete={onDelete}\n          onMove={onMove}\n          onCategoryRefresh={onCategoryRefresh}\n          categories={categories}\n        />\n      )}\n    </div>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}