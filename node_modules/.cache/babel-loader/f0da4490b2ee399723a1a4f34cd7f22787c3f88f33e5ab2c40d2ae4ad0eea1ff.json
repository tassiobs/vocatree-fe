{"ast":null,"code":"var _jsxFileName = \"/Users/tassiobs/Documents/vocatree-fe/src/components/DropdownMenu.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { MoreVertical, Edit2, Trash2, Move, Copy, Folder, FileText, Sparkles, BookOpen } from 'lucide-react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const DropdownMenu = ({\n  items,\n  className = '',\n  disabled = false\n}) => {\n  _s();\n  const [isOpen, setIsOpen] = useState(false);\n  const [position, setPosition] = useState({\n    top: 0,\n    right: 0,\n    openUpward: false\n  });\n  const [isMobile, setIsMobile] = useState(false);\n  const buttonRef = useRef(null);\n  const menuRef = useRef(null);\n\n  // Check if mobile\n  useEffect(() => {\n    const checkMobile = () => {\n      setIsMobile(window.innerWidth < 768);\n    };\n    checkMobile();\n    window.addEventListener('resize', checkMobile);\n    return () => window.removeEventListener('resize', checkMobile);\n  }, []);\n\n  // Calculate menu position with proper viewport detection\n  const updatePosition = () => {\n    if (buttonRef.current && menuRef.current) {\n      const rect = buttonRef.current.getBoundingClientRect();\n      const viewportWidth = window.innerWidth;\n      const viewportHeight = window.innerHeight;\n      const scrollY = window.scrollY;\n      const scrollX = window.scrollX;\n\n      // Estimate menu height (each item is ~44px + padding)\n      const estimatedMenuHeight = Math.min(items.length * 44 + 8, window.innerHeight * 0.6);\n      const menuWidth = 240; // max-w-[240px]\n      const gap = 4;\n\n      // Calculate available space\n      const spaceBelow = viewportHeight - rect.bottom;\n      const spaceAbove = rect.top;\n      const spaceRight = viewportWidth - rect.right;\n      const spaceLeft = rect.left;\n\n      // Determine if menu should open upward\n      const shouldOpenUpward = spaceBelow < estimatedMenuHeight && spaceAbove > spaceBelow;\n\n      // Calculate vertical position\n      let top;\n      if (shouldOpenUpward) {\n        top = rect.top + scrollY - estimatedMenuHeight - gap;\n      } else {\n        top = rect.bottom + scrollY + gap;\n      }\n\n      // Ensure menu stays within viewport bounds\n      const maxTop = scrollY;\n      const minTop = scrollY + viewportHeight - estimatedMenuHeight;\n      top = Math.max(maxTop, Math.min(minTop, top));\n\n      // Calculate horizontal position (align to right edge of button)\n      let right = viewportWidth - rect.right - scrollX;\n\n      // If not enough space on right, align to left edge\n      if (right < menuWidth && spaceLeft > spaceRight) {\n        right = viewportWidth - rect.left - scrollX;\n      }\n\n      // Ensure menu doesn't go off screen horizontally\n      right = Math.max(8, Math.min(right, viewportWidth - menuWidth - 8));\n      setPosition({\n        top,\n        right,\n        openUpward: shouldOpenUpward\n      });\n    }\n  };\n\n  // Handle click outside to close menu\n  useEffect(() => {\n    const handleClickOutside = event => {\n      if (menuRef.current && !menuRef.current.contains(event.target) && buttonRef.current && !buttonRef.current.contains(event.target)) {\n        setIsOpen(false);\n      }\n    };\n    const handleEscape = event => {\n      if (event.key === 'Escape') {\n        setIsOpen(false);\n      }\n    };\n    if (isOpen) {\n      // Use both mouse and touch events for better mobile support\n      document.addEventListener('mousedown', handleClickOutside);\n      document.addEventListener('touchstart', handleClickOutside);\n      document.addEventListener('keydown', handleEscape);\n      // Delay position update to ensure menu is rendered\n      setTimeout(updatePosition, 0);\n      // Also update on scroll\n      const handleScroll = () => {\n        if (isOpen) {\n          updatePosition();\n        }\n      };\n      window.addEventListener('scroll', handleScroll, true);\n      return () => {\n        document.removeEventListener('mousedown', handleClickOutside);\n        document.removeEventListener('touchstart', handleClickOutside);\n        document.removeEventListener('keydown', handleEscape);\n        window.removeEventListener('scroll', handleScroll, true);\n      };\n    }\n  }, [isOpen, items.length]);\n\n  // Handle window resize\n  useEffect(() => {\n    const handleResize = () => {\n      if (isOpen) {\n        updatePosition();\n      }\n    };\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, [isOpen]);\n  const handleToggle = e => {\n    e.stopPropagation();\n    if (!disabled) {\n      setIsOpen(!isOpen);\n    }\n  };\n  const handleItemClick = item => {\n    if (!item.disabled) {\n      item.onClick();\n      setIsOpen(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      ref: buttonRef,\n      onClick: handleToggle,\n      disabled: disabled,\n      className: `\n          p-2 rounded-lg transition-all duration-200\n          ${disabled ? 'opacity-50 cursor-not-allowed' : 'hover:bg-gray-100 active:bg-gray-200'}\n          ${className}\n        `,\n      style: {\n        minWidth: '44px',\n        minHeight: '44px'\n      } // Mobile-friendly tap target\n      ,\n      \"aria-label\": \"More actions\",\n      \"aria-expanded\": isOpen,\n      \"aria-haspopup\": \"menu\",\n      children: /*#__PURE__*/_jsxDEV(MoreVertical, {\n        className: \"h-4 w-4 text-gray-600\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 7\n    }, this), isOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: menuRef,\n      className: \"fixed z-50 bg-white border border-gray-200 rounded-lg shadow-lg py-1 min-w-[180px] max-w-[240px]\",\n      style: {\n        top: `${position.top}px`,\n        right: `${position.right}px`,\n        maxHeight: '300px',\n        overflowY: 'auto'\n      },\n      role: \"menu\",\n      \"aria-orientation\": \"vertical\",\n      children: items.map(item => /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleItemClick(item),\n        disabled: item.disabled,\n        className: `\n                w-full flex items-center px-4 py-3 text-sm transition-colors\n                ${item.disabled ? 'opacity-50 cursor-not-allowed text-gray-400' : item.destructive ? 'text-red-600 hover:bg-red-50 active:bg-red-100' : 'text-gray-700 hover:bg-gray-50 active:bg-gray-100'}\n              `,\n        style: {\n          minHeight: '44px'\n        } // Mobile-friendly tap target\n        ,\n        role: \"menuitem\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mr-3 flex-shrink-0\",\n          children: item.icon\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-left flex-1\",\n          children: item.label\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 15\n        }, this)]\n      }, item.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 177,\n    columnNumber: 5\n  }, this);\n};\n\n// Predefined action items for common use cases\n_s(DropdownMenu, \"Y8mndiwi+Nx6OjSCl07VVhAZz0Y=\");\n_c = DropdownMenu;\nexport const createEditAction = onEdit => ({\n  id: 'edit',\n  label: 'Edit',\n  icon: /*#__PURE__*/_jsxDEV(Edit2, {\n    className: \"h-4 w-4\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 246,\n    columnNumber: 9\n  }, this),\n  onClick: onEdit\n});\nexport const createDeleteAction = onDelete => ({\n  id: 'delete',\n  label: 'Delete',\n  icon: /*#__PURE__*/_jsxDEV(Trash2, {\n    className: \"h-4 w-4\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 253,\n    columnNumber: 9\n  }, this),\n  onClick: onDelete,\n  destructive: true\n});\nexport const createAddChildAction = (onAddChild, type = 'card') => ({\n  id: 'add-child',\n  label: `Add ${type === 'folder' ? 'Subfolder' : 'Card'}`,\n  icon: type === 'folder' ? /*#__PURE__*/_jsxDEV(Folder, {\n    className: \"h-4 w-4\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 261,\n    columnNumber: 29\n  }, this) : /*#__PURE__*/_jsxDEV(FileText, {\n    className: \"h-4 w-4\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 261,\n    columnNumber: 62\n  }, this),\n  onClick: onAddChild\n});\nexport const createMoveAction = onMove => ({\n  id: 'move',\n  label: 'Move',\n  icon: /*#__PURE__*/_jsxDEV(Move, {\n    className: \"h-4 w-4\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 268,\n    columnNumber: 9\n  }, this),\n  onClick: onMove\n});\nexport const createDuplicateAction = onDuplicate => ({\n  id: 'duplicate',\n  label: 'Duplicate',\n  icon: /*#__PURE__*/_jsxDEV(Copy, {\n    className: \"h-4 w-4\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 275,\n    columnNumber: 9\n  }, this),\n  onClick: onDuplicate\n});\nexport const createAICardAction = onCreateAICard => ({\n  id: 'ai-card',\n  label: 'Add a card using AI',\n  icon: /*#__PURE__*/_jsxDEV(Sparkles, {\n    className: \"h-4 w-4\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 282,\n    columnNumber: 9\n  }, this),\n  onClick: onCreateAICard\n});\nexport const createPracticeCardAction = onPractice => ({\n  id: 'practice-card',\n  label: 'Practice card',\n  icon: /*#__PURE__*/_jsxDEV(BookOpen, {\n    className: \"h-4 w-4\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 289,\n    columnNumber: 9\n  }, this),\n  onClick: onPractice\n});\nvar _c;\n$RefreshReg$(_c, \"DropdownMenu\");","map":{"version":3,"names":["React","useState","useRef","useEffect","MoreVertical","Edit2","Trash2","Move","Copy","Folder","FileText","Sparkles","BookOpen","jsxDEV","_jsxDEV","DropdownMenu","items","className","disabled","_s","isOpen","setIsOpen","position","setPosition","top","right","openUpward","isMobile","setIsMobile","buttonRef","menuRef","checkMobile","window","innerWidth","addEventListener","removeEventListener","updatePosition","current","rect","getBoundingClientRect","viewportWidth","viewportHeight","innerHeight","scrollY","scrollX","estimatedMenuHeight","Math","min","length","menuWidth","gap","spaceBelow","bottom","spaceAbove","spaceRight","spaceLeft","left","shouldOpenUpward","maxTop","minTop","max","handleClickOutside","event","contains","target","handleEscape","key","document","setTimeout","handleScroll","handleResize","handleToggle","e","stopPropagation","handleItemClick","item","onClick","children","ref","style","minWidth","minHeight","fileName","_jsxFileName","lineNumber","columnNumber","maxHeight","overflowY","role","map","destructive","icon","label","id","_c","createEditAction","onEdit","createDeleteAction","onDelete","createAddChildAction","onAddChild","type","createMoveAction","onMove","createDuplicateAction","onDuplicate","createAICardAction","onCreateAICard","createPracticeCardAction","onPractice","$RefreshReg$"],"sources":["/Users/tassiobs/Documents/vocatree-fe/src/components/DropdownMenu.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { createPortal } from 'react-dom';\nimport { \n  MoreVertical, \n  Edit2, \n  Trash2, \n  Plus, \n  Move, \n  Copy,\n  Folder,\n  FileText,\n  Sparkles,\n  BookOpen\n} from 'lucide-react';\n\nexport interface DropdownMenuItem {\n  id: string;\n  label: string;\n  icon: React.ReactNode;\n  onClick: () => void;\n  disabled?: boolean;\n  destructive?: boolean;\n}\n\ninterface DropdownMenuProps {\n  items: DropdownMenuItem[];\n  className?: string;\n  disabled?: boolean;\n}\n\nexport const DropdownMenu: React.FC<DropdownMenuProps> = ({\n  items,\n  className = '',\n  disabled = false,\n}) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [position, setPosition] = useState({ top: 0, right: 0, openUpward: false });\n  const [isMobile, setIsMobile] = useState(false);\n  const buttonRef = useRef<HTMLButtonElement>(null);\n  const menuRef = useRef<HTMLDivElement>(null);\n\n  // Check if mobile\n  useEffect(() => {\n    const checkMobile = () => {\n      setIsMobile(window.innerWidth < 768);\n    };\n    checkMobile();\n    window.addEventListener('resize', checkMobile);\n    return () => window.removeEventListener('resize', checkMobile);\n  }, []);\n\n  // Calculate menu position with proper viewport detection\n  const updatePosition = () => {\n    if (buttonRef.current && menuRef.current) {\n      const rect = buttonRef.current.getBoundingClientRect();\n      const viewportWidth = window.innerWidth;\n      const viewportHeight = window.innerHeight;\n      const scrollY = window.scrollY;\n      const scrollX = window.scrollX;\n      \n      // Estimate menu height (each item is ~44px + padding)\n      const estimatedMenuHeight = Math.min(items.length * 44 + 8, window.innerHeight * 0.6);\n      const menuWidth = 240; // max-w-[240px]\n      const gap = 4;\n      \n      // Calculate available space\n      const spaceBelow = viewportHeight - rect.bottom;\n      const spaceAbove = rect.top;\n      const spaceRight = viewportWidth - rect.right;\n      const spaceLeft = rect.left;\n      \n      // Determine if menu should open upward\n      const shouldOpenUpward = spaceBelow < estimatedMenuHeight && spaceAbove > spaceBelow;\n      \n      // Calculate vertical position\n      let top: number;\n      if (shouldOpenUpward) {\n        top = rect.top + scrollY - estimatedMenuHeight - gap;\n      } else {\n        top = rect.bottom + scrollY + gap;\n      }\n      \n      // Ensure menu stays within viewport bounds\n      const maxTop = scrollY;\n      const minTop = scrollY + viewportHeight - estimatedMenuHeight;\n      top = Math.max(maxTop, Math.min(minTop, top));\n      \n      // Calculate horizontal position (align to right edge of button)\n      let right = viewportWidth - rect.right - scrollX;\n      \n      // If not enough space on right, align to left edge\n      if (right < menuWidth && spaceLeft > spaceRight) {\n        right = viewportWidth - rect.left - scrollX;\n      }\n      \n      // Ensure menu doesn't go off screen horizontally\n      right = Math.max(8, Math.min(right, viewportWidth - menuWidth - 8));\n      \n      setPosition({ \n        top, \n        right, \n        openUpward: shouldOpenUpward \n      });\n    }\n  };\n\n  // Handle click outside to close menu\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent | TouchEvent) => {\n      if (\n        menuRef.current &&\n        !menuRef.current.contains(event.target as Node) &&\n        buttonRef.current &&\n        !buttonRef.current.contains(event.target as Node)\n      ) {\n        setIsOpen(false);\n      }\n    };\n\n    const handleEscape = (event: KeyboardEvent) => {\n      if (event.key === 'Escape') {\n        setIsOpen(false);\n      }\n    };\n\n    if (isOpen) {\n      // Use both mouse and touch events for better mobile support\n      document.addEventListener('mousedown', handleClickOutside);\n      document.addEventListener('touchstart', handleClickOutside);\n      document.addEventListener('keydown', handleEscape);\n      // Delay position update to ensure menu is rendered\n      setTimeout(updatePosition, 0);\n      // Also update on scroll\n      const handleScroll = () => {\n        if (isOpen) {\n          updatePosition();\n        }\n      };\n      window.addEventListener('scroll', handleScroll, true);\n      \n      return () => {\n        document.removeEventListener('mousedown', handleClickOutside);\n        document.removeEventListener('touchstart', handleClickOutside);\n        document.removeEventListener('keydown', handleEscape);\n        window.removeEventListener('scroll', handleScroll, true);\n      };\n    }\n  }, [isOpen, items.length]);\n\n  // Handle window resize\n  useEffect(() => {\n    const handleResize = () => {\n      if (isOpen) {\n        updatePosition();\n      }\n    };\n\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, [isOpen]);\n\n  const handleToggle = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    if (!disabled) {\n      setIsOpen(!isOpen);\n    }\n  };\n\n  const handleItemClick = (item: DropdownMenuItem) => {\n    if (!item.disabled) {\n      item.onClick();\n      setIsOpen(false);\n    }\n  };\n\n  return (\n    <div className=\"relative\">\n      {/* Three dots button */}\n      <button\n        ref={buttonRef}\n        onClick={handleToggle}\n        disabled={disabled}\n        className={`\n          p-2 rounded-lg transition-all duration-200\n          ${disabled \n            ? 'opacity-50 cursor-not-allowed' \n            : 'hover:bg-gray-100 active:bg-gray-200'\n          }\n          ${className}\n        `}\n        style={{ minWidth: '44px', minHeight: '44px' }} // Mobile-friendly tap target\n        aria-label=\"More actions\"\n        aria-expanded={isOpen}\n        aria-haspopup=\"menu\"\n      >\n        <MoreVertical className=\"h-4 w-4 text-gray-600\" />\n      </button>\n\n      {/* Dropdown menu */}\n      {isOpen && (\n        <div\n          ref={menuRef}\n          className=\"fixed z-50 bg-white border border-gray-200 rounded-lg shadow-lg py-1 min-w-[180px] max-w-[240px]\"\n          style={{\n            top: `${position.top}px`,\n            right: `${position.right}px`,\n            maxHeight: '300px',\n            overflowY: 'auto',\n          }}\n          role=\"menu\"\n          aria-orientation=\"vertical\"\n        >\n          {items.map((item) => (\n            <button\n              key={item.id}\n              onClick={() => handleItemClick(item)}\n              disabled={item.disabled}\n              className={`\n                w-full flex items-center px-4 py-3 text-sm transition-colors\n                ${item.disabled\n                  ? 'opacity-50 cursor-not-allowed text-gray-400'\n                  : item.destructive\n                  ? 'text-red-600 hover:bg-red-50 active:bg-red-100'\n                  : 'text-gray-700 hover:bg-gray-50 active:bg-gray-100'\n                }\n              `}\n              style={{ minHeight: '44px' }} // Mobile-friendly tap target\n              role=\"menuitem\"\n            >\n              <div className=\"mr-3 flex-shrink-0\">\n                {item.icon}\n              </div>\n              <span className=\"text-left flex-1\">{item.label}</span>\n            </button>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Predefined action items for common use cases\nexport const createEditAction = (onEdit: () => void): DropdownMenuItem => ({\n  id: 'edit',\n  label: 'Edit',\n  icon: <Edit2 className=\"h-4 w-4\" />,\n  onClick: onEdit,\n});\n\nexport const createDeleteAction = (onDelete: () => void): DropdownMenuItem => ({\n  id: 'delete',\n  label: 'Delete',\n  icon: <Trash2 className=\"h-4 w-4\" />,\n  onClick: onDelete,\n  destructive: true,\n});\n\nexport const createAddChildAction = (onAddChild: () => void, type: 'folder' | 'card' = 'card'): DropdownMenuItem => ({\n  id: 'add-child',\n  label: `Add ${type === 'folder' ? 'Subfolder' : 'Card'}`,\n  icon: type === 'folder' ? <Folder className=\"h-4 w-4\" /> : <FileText className=\"h-4 w-4\" />,\n  onClick: onAddChild,\n});\n\nexport const createMoveAction = (onMove: () => void): DropdownMenuItem => ({\n  id: 'move',\n  label: 'Move',\n  icon: <Move className=\"h-4 w-4\" />,\n  onClick: onMove,\n});\n\nexport const createDuplicateAction = (onDuplicate: () => void): DropdownMenuItem => ({\n  id: 'duplicate',\n  label: 'Duplicate',\n  icon: <Copy className=\"h-4 w-4\" />,\n  onClick: onDuplicate,\n});\n\nexport const createAICardAction = (onCreateAICard: () => void): DropdownMenuItem => ({\n  id: 'ai-card',\n  label: 'Add a card using AI',\n  icon: <Sparkles className=\"h-4 w-4\" />,\n  onClick: onCreateAICard,\n});\n\nexport const createPracticeCardAction = (onPractice: () => void): DropdownMenuItem => ({\n  id: 'practice-card',\n  label: 'Practice card',\n  icon: <BookOpen className=\"h-4 w-4\" />,\n  onClick: onPractice,\n});\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,MAAM,EAAEC,SAAS,QAAQ,OAAO;AAE1D,SACEC,YAAY,EACZC,KAAK,EACLC,MAAM,EAENC,IAAI,EACJC,IAAI,EACJC,MAAM,EACNC,QAAQ,EACRC,QAAQ,EACRC,QAAQ,QACH,cAAc;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAiBtB,OAAO,MAAMC,YAAyC,GAAGA,CAAC;EACxDC,KAAK;EACLC,SAAS,GAAG,EAAE;EACdC,QAAQ,GAAG;AACb,CAAC,KAAK;EAAAC,EAAA;EACJ,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGpB,QAAQ,CAAC,KAAK,CAAC;EAC3C,MAAM,CAACqB,QAAQ,EAAEC,WAAW,CAAC,GAAGtB,QAAQ,CAAC;IAAEuB,GAAG,EAAE,CAAC;IAAEC,KAAK,EAAE,CAAC;IAAEC,UAAU,EAAE;EAAM,CAAC,CAAC;EACjF,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAG3B,QAAQ,CAAC,KAAK,CAAC;EAC/C,MAAM4B,SAAS,GAAG3B,MAAM,CAAoB,IAAI,CAAC;EACjD,MAAM4B,OAAO,GAAG5B,MAAM,CAAiB,IAAI,CAAC;;EAE5C;EACAC,SAAS,CAAC,MAAM;IACd,MAAM4B,WAAW,GAAGA,CAAA,KAAM;MACxBH,WAAW,CAACI,MAAM,CAACC,UAAU,GAAG,GAAG,CAAC;IACtC,CAAC;IACDF,WAAW,CAAC,CAAC;IACbC,MAAM,CAACE,gBAAgB,CAAC,QAAQ,EAAEH,WAAW,CAAC;IAC9C,OAAO,MAAMC,MAAM,CAACG,mBAAmB,CAAC,QAAQ,EAAEJ,WAAW,CAAC;EAChE,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAMK,cAAc,GAAGA,CAAA,KAAM;IAC3B,IAAIP,SAAS,CAACQ,OAAO,IAAIP,OAAO,CAACO,OAAO,EAAE;MACxC,MAAMC,IAAI,GAAGT,SAAS,CAACQ,OAAO,CAACE,qBAAqB,CAAC,CAAC;MACtD,MAAMC,aAAa,GAAGR,MAAM,CAACC,UAAU;MACvC,MAAMQ,cAAc,GAAGT,MAAM,CAACU,WAAW;MACzC,MAAMC,OAAO,GAAGX,MAAM,CAACW,OAAO;MAC9B,MAAMC,OAAO,GAAGZ,MAAM,CAACY,OAAO;;MAE9B;MACA,MAAMC,mBAAmB,GAAGC,IAAI,CAACC,GAAG,CAAC/B,KAAK,CAACgC,MAAM,GAAG,EAAE,GAAG,CAAC,EAAEhB,MAAM,CAACU,WAAW,GAAG,GAAG,CAAC;MACrF,MAAMO,SAAS,GAAG,GAAG,CAAC,CAAC;MACvB,MAAMC,GAAG,GAAG,CAAC;;MAEb;MACA,MAAMC,UAAU,GAAGV,cAAc,GAAGH,IAAI,CAACc,MAAM;MAC/C,MAAMC,UAAU,GAAGf,IAAI,CAACd,GAAG;MAC3B,MAAM8B,UAAU,GAAGd,aAAa,GAAGF,IAAI,CAACb,KAAK;MAC7C,MAAM8B,SAAS,GAAGjB,IAAI,CAACkB,IAAI;;MAE3B;MACA,MAAMC,gBAAgB,GAAGN,UAAU,GAAGN,mBAAmB,IAAIQ,UAAU,GAAGF,UAAU;;MAEpF;MACA,IAAI3B,GAAW;MACf,IAAIiC,gBAAgB,EAAE;QACpBjC,GAAG,GAAGc,IAAI,CAACd,GAAG,GAAGmB,OAAO,GAAGE,mBAAmB,GAAGK,GAAG;MACtD,CAAC,MAAM;QACL1B,GAAG,GAAGc,IAAI,CAACc,MAAM,GAAGT,OAAO,GAAGO,GAAG;MACnC;;MAEA;MACA,MAAMQ,MAAM,GAAGf,OAAO;MACtB,MAAMgB,MAAM,GAAGhB,OAAO,GAAGF,cAAc,GAAGI,mBAAmB;MAC7DrB,GAAG,GAAGsB,IAAI,CAACc,GAAG,CAACF,MAAM,EAAEZ,IAAI,CAACC,GAAG,CAACY,MAAM,EAAEnC,GAAG,CAAC,CAAC;;MAE7C;MACA,IAAIC,KAAK,GAAGe,aAAa,GAAGF,IAAI,CAACb,KAAK,GAAGmB,OAAO;;MAEhD;MACA,IAAInB,KAAK,GAAGwB,SAAS,IAAIM,SAAS,GAAGD,UAAU,EAAE;QAC/C7B,KAAK,GAAGe,aAAa,GAAGF,IAAI,CAACkB,IAAI,GAAGZ,OAAO;MAC7C;;MAEA;MACAnB,KAAK,GAAGqB,IAAI,CAACc,GAAG,CAAC,CAAC,EAAEd,IAAI,CAACC,GAAG,CAACtB,KAAK,EAAEe,aAAa,GAAGS,SAAS,GAAG,CAAC,CAAC,CAAC;MAEnE1B,WAAW,CAAC;QACVC,GAAG;QACHC,KAAK;QACLC,UAAU,EAAE+B;MACd,CAAC,CAAC;IACJ;EACF,CAAC;;EAED;EACAtD,SAAS,CAAC,MAAM;IACd,MAAM0D,kBAAkB,GAAIC,KAA8B,IAAK;MAC7D,IACEhC,OAAO,CAACO,OAAO,IACf,CAACP,OAAO,CAACO,OAAO,CAAC0B,QAAQ,CAACD,KAAK,CAACE,MAAc,CAAC,IAC/CnC,SAAS,CAACQ,OAAO,IACjB,CAACR,SAAS,CAACQ,OAAO,CAAC0B,QAAQ,CAACD,KAAK,CAACE,MAAc,CAAC,EACjD;QACA3C,SAAS,CAAC,KAAK,CAAC;MAClB;IACF,CAAC;IAED,MAAM4C,YAAY,GAAIH,KAAoB,IAAK;MAC7C,IAAIA,KAAK,CAACI,GAAG,KAAK,QAAQ,EAAE;QAC1B7C,SAAS,CAAC,KAAK,CAAC;MAClB;IACF,CAAC;IAED,IAAID,MAAM,EAAE;MACV;MACA+C,QAAQ,CAACjC,gBAAgB,CAAC,WAAW,EAAE2B,kBAAkB,CAAC;MAC1DM,QAAQ,CAACjC,gBAAgB,CAAC,YAAY,EAAE2B,kBAAkB,CAAC;MAC3DM,QAAQ,CAACjC,gBAAgB,CAAC,SAAS,EAAE+B,YAAY,CAAC;MAClD;MACAG,UAAU,CAAChC,cAAc,EAAE,CAAC,CAAC;MAC7B;MACA,MAAMiC,YAAY,GAAGA,CAAA,KAAM;QACzB,IAAIjD,MAAM,EAAE;UACVgB,cAAc,CAAC,CAAC;QAClB;MACF,CAAC;MACDJ,MAAM,CAACE,gBAAgB,CAAC,QAAQ,EAAEmC,YAAY,EAAE,IAAI,CAAC;MAErD,OAAO,MAAM;QACXF,QAAQ,CAAChC,mBAAmB,CAAC,WAAW,EAAE0B,kBAAkB,CAAC;QAC7DM,QAAQ,CAAChC,mBAAmB,CAAC,YAAY,EAAE0B,kBAAkB,CAAC;QAC9DM,QAAQ,CAAChC,mBAAmB,CAAC,SAAS,EAAE8B,YAAY,CAAC;QACrDjC,MAAM,CAACG,mBAAmB,CAAC,QAAQ,EAAEkC,YAAY,EAAE,IAAI,CAAC;MAC1D,CAAC;IACH;EACF,CAAC,EAAE,CAACjD,MAAM,EAAEJ,KAAK,CAACgC,MAAM,CAAC,CAAC;;EAE1B;EACA7C,SAAS,CAAC,MAAM;IACd,MAAMmE,YAAY,GAAGA,CAAA,KAAM;MACzB,IAAIlD,MAAM,EAAE;QACVgB,cAAc,CAAC,CAAC;MAClB;IACF,CAAC;IAEDJ,MAAM,CAACE,gBAAgB,CAAC,QAAQ,EAAEoC,YAAY,CAAC;IAC/C,OAAO,MAAMtC,MAAM,CAACG,mBAAmB,CAAC,QAAQ,EAAEmC,YAAY,CAAC;EACjE,CAAC,EAAE,CAAClD,MAAM,CAAC,CAAC;EAEZ,MAAMmD,YAAY,GAAIC,CAAmB,IAAK;IAC5CA,CAAC,CAACC,eAAe,CAAC,CAAC;IACnB,IAAI,CAACvD,QAAQ,EAAE;MACbG,SAAS,CAAC,CAACD,MAAM,CAAC;IACpB;EACF,CAAC;EAED,MAAMsD,eAAe,GAAIC,IAAsB,IAAK;IAClD,IAAI,CAACA,IAAI,CAACzD,QAAQ,EAAE;MAClByD,IAAI,CAACC,OAAO,CAAC,CAAC;MACdvD,SAAS,CAAC,KAAK,CAAC;IAClB;EACF,CAAC;EAED,oBACEP,OAAA;IAAKG,SAAS,EAAC,UAAU;IAAA4D,QAAA,gBAEvB/D,OAAA;MACEgE,GAAG,EAAEjD,SAAU;MACf+C,OAAO,EAAEL,YAAa;MACtBrD,QAAQ,EAAEA,QAAS;MACnBD,SAAS,EAAE;AACnB;AACA,YAAYC,QAAQ,GACN,+BAA+B,GAC/B,sCAAsC;AACpD,YACYD,SAAS;AACrB,SAAU;MACF8D,KAAK,EAAE;QAAEC,QAAQ,EAAE,MAAM;QAAEC,SAAS,EAAE;MAAO,CAAE,CAAC;MAAA;MAChD,cAAW,cAAc;MACzB,iBAAe7D,MAAO;MACtB,iBAAc,MAAM;MAAAyD,QAAA,eAEpB/D,OAAA,CAACV,YAAY;QAACa,SAAS,EAAC;MAAuB;QAAAiE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC5C,CAAC,EAGRjE,MAAM,iBACLN,OAAA;MACEgE,GAAG,EAAEhD,OAAQ;MACbb,SAAS,EAAC,kGAAkG;MAC5G8D,KAAK,EAAE;QACLvD,GAAG,EAAE,GAAGF,QAAQ,CAACE,GAAG,IAAI;QACxBC,KAAK,EAAE,GAAGH,QAAQ,CAACG,KAAK,IAAI;QAC5B6D,SAAS,EAAE,OAAO;QAClBC,SAAS,EAAE;MACb,CAAE;MACFC,IAAI,EAAC,MAAM;MACX,oBAAiB,UAAU;MAAAX,QAAA,EAE1B7D,KAAK,CAACyE,GAAG,CAAEd,IAAI,iBACd7D,OAAA;QAEE8D,OAAO,EAAEA,CAAA,KAAMF,eAAe,CAACC,IAAI,CAAE;QACrCzD,QAAQ,EAAEyD,IAAI,CAACzD,QAAS;QACxBD,SAAS,EAAE;AACzB;AACA,kBAAkB0D,IAAI,CAACzD,QAAQ,GACX,6CAA6C,GAC7CyD,IAAI,CAACe,WAAW,GAChB,gDAAgD,GAChD,mDAAmD;AACvE,eACgB;QACFX,KAAK,EAAE;UAAEE,SAAS,EAAE;QAAO,CAAE,CAAC;QAAA;QAC9BO,IAAI,EAAC,UAAU;QAAAX,QAAA,gBAEf/D,OAAA;UAAKG,SAAS,EAAC,oBAAoB;UAAA4D,QAAA,EAChCF,IAAI,CAACgB;QAAI;UAAAT,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACP,CAAC,eACNvE,OAAA;UAAMG,SAAS,EAAC,kBAAkB;UAAA4D,QAAA,EAAEF,IAAI,CAACiB;QAAK;UAAAV,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC;MAAA,GAlBjDV,IAAI,CAACkB,EAAE;QAAAX,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAmBN,CACT;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CACN;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV,CAAC;;AAED;AAAAlE,EAAA,CAnNaJ,YAAyC;AAAA+E,EAAA,GAAzC/E,YAAyC;AAoNtD,OAAO,MAAMgF,gBAAgB,GAAIC,MAAkB,KAAwB;EACzEH,EAAE,EAAE,MAAM;EACVD,KAAK,EAAE,MAAM;EACbD,IAAI,eAAE7E,OAAA,CAACT,KAAK;IAACY,SAAS,EAAC;EAAS;IAAAiE,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CAAC;EACnCT,OAAO,EAAEoB;AACX,CAAC,CAAC;AAEF,OAAO,MAAMC,kBAAkB,GAAIC,QAAoB,KAAwB;EAC7EL,EAAE,EAAE,QAAQ;EACZD,KAAK,EAAE,QAAQ;EACfD,IAAI,eAAE7E,OAAA,CAACR,MAAM;IAACW,SAAS,EAAC;EAAS;IAAAiE,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CAAC;EACpCT,OAAO,EAAEsB,QAAQ;EACjBR,WAAW,EAAE;AACf,CAAC,CAAC;AAEF,OAAO,MAAMS,oBAAoB,GAAGA,CAACC,UAAsB,EAAEC,IAAuB,GAAG,MAAM,MAAwB;EACnHR,EAAE,EAAE,WAAW;EACfD,KAAK,EAAE,OAAOS,IAAI,KAAK,QAAQ,GAAG,WAAW,GAAG,MAAM,EAAE;EACxDV,IAAI,EAAEU,IAAI,KAAK,QAAQ,gBAAGvF,OAAA,CAACL,MAAM;IAACQ,SAAS,EAAC;EAAS;IAAAiE,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CAAC,gBAAGvE,OAAA,CAACJ,QAAQ;IAACO,SAAS,EAAC;EAAS;IAAAiE,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CAAC;EAC3FT,OAAO,EAAEwB;AACX,CAAC,CAAC;AAEF,OAAO,MAAME,gBAAgB,GAAIC,MAAkB,KAAwB;EACzEV,EAAE,EAAE,MAAM;EACVD,KAAK,EAAE,MAAM;EACbD,IAAI,eAAE7E,OAAA,CAACP,IAAI;IAACU,SAAS,EAAC;EAAS;IAAAiE,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CAAC;EAClCT,OAAO,EAAE2B;AACX,CAAC,CAAC;AAEF,OAAO,MAAMC,qBAAqB,GAAIC,WAAuB,KAAwB;EACnFZ,EAAE,EAAE,WAAW;EACfD,KAAK,EAAE,WAAW;EAClBD,IAAI,eAAE7E,OAAA,CAACN,IAAI;IAACS,SAAS,EAAC;EAAS;IAAAiE,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CAAC;EAClCT,OAAO,EAAE6B;AACX,CAAC,CAAC;AAEF,OAAO,MAAMC,kBAAkB,GAAIC,cAA0B,KAAwB;EACnFd,EAAE,EAAE,SAAS;EACbD,KAAK,EAAE,qBAAqB;EAC5BD,IAAI,eAAE7E,OAAA,CAACH,QAAQ;IAACM,SAAS,EAAC;EAAS;IAAAiE,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CAAC;EACtCT,OAAO,EAAE+B;AACX,CAAC,CAAC;AAEF,OAAO,MAAMC,wBAAwB,GAAIC,UAAsB,KAAwB;EACrFhB,EAAE,EAAE,eAAe;EACnBD,KAAK,EAAE,eAAe;EACtBD,IAAI,eAAE7E,OAAA,CAACF,QAAQ;IAACK,SAAS,EAAC;EAAS;IAAAiE,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CAAC;EACtCT,OAAO,EAAEiC;AACX,CAAC,CAAC;AAAC,IAAAf,EAAA;AAAAgB,YAAA,CAAAhB,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}