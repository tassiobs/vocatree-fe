{"ast":null,"code":"var _jsxFileName = \"/Users/tassiobs/Documents/vocatree-fe/src/components/CategoryView.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { TreeNode } from './TreeNode';\nimport { AddItemInput } from './AddItemInput';\nimport { AICardForm } from './AICardForm';\nimport { DropdownMenu, createEditAction, createDeleteAction, createAICardAction } from './DropdownMenu';\nimport { handleConditionalDelete } from '../utils/deleteUtils';\nimport { X, Tag, Loader2, Folder, Plus, Check } from 'lucide-react';\nimport { apiClient } from '../services/api';\nimport { buildTree } from '../utils/treeUtils';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const CategoryView = ({\n  category,\n  onClose,\n  onRename,\n  onDelete,\n  onMove,\n  onCategoryRefresh,\n  categories = []\n}) => {\n  _s();\n  const [categoryData, setCategoryData] = useState(category);\n  const [isLoading, setIsLoading] = useState(false);\n  const [expandedIds, setExpandedIds] = useState(new Set());\n  const [allCategories, setAllCategories] = useState(categories);\n  const [isEditing, setIsEditing] = useState(false);\n  const [editName, setEditName] = useState(category.name);\n  const [showAddInput, setShowAddInput] = useState(false);\n  const [addType, setAddType] = useState('folder');\n  const [isDeleting, setIsDeleting] = useState(false);\n  const [isSaving, setIsSaving] = useState(false);\n  const [showAICardForm, setShowAICardForm] = useState(false);\n  useEffect(() => {\n    loadCategoryData();\n    loadAllCategories();\n  }, [category.id]);\n\n  // Sync editName with category.name when category changes\n  useEffect(() => {\n    if (!isEditing) {\n      setEditName(categoryData.name);\n    }\n  }, [categoryData.name, isEditing]);\n  const loadAllCategories = async () => {\n    try {\n      const cats = await apiClient.getCategories();\n      setAllCategories(cats.map(cat => ({\n        id: cat.id,\n        name: cat.name,\n        isExpanded: false,\n        children: []\n      })));\n    } catch (err) {\n      console.error('Error loading categories:', err);\n    }\n  };\n  const loadCategoryData = async () => {\n    try {\n      setIsLoading(true);\n      const cards = await apiClient.getCardsHierarchy(category.id);\n      const treeData = buildTree(cards, expandedIds);\n      setCategoryData({\n        ...category,\n        children: treeData,\n        isExpanded: true\n      });\n    } catch (err) {\n      console.error('Error loading category data:', err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const handleToggle = id => {\n    setExpandedIds(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(id)) {\n        newSet.delete(id);\n      } else {\n        newSet.add(id);\n      }\n\n      // Update the tree items with new expansion state\n      const updateTreeExpansion = items => {\n        return items.map(item => ({\n          ...item,\n          isExpanded: newSet.has(item.id),\n          children: item.children ? updateTreeExpansion(item.children) : []\n        }));\n      };\n      setCategoryData(prev => ({\n        ...prev,\n        children: updateTreeExpansion(prev.children)\n      }));\n      return newSet;\n    });\n  };\n  const handleAddChildToFolder = async (parentId, type, name) => {\n    try {\n      await apiClient.createCard({\n        name,\n        parent_id: parentId,\n        is_folder: type === 'folder',\n        category_id: category.id\n      });\n\n      // Refresh the category data\n      await loadCategoryData();\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error('Error adding child to folder:', err);\n      const errorMessage = err.message || ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.detail) || 'Failed to add item';\n      alert(`Failed to add item: ${errorMessage}`);\n    }\n  };\n  const handleCategoryRefresh = async () => {\n    await loadCategoryData();\n  };\n  const handleRename = async () => {\n    if (!editName.trim()) {\n      setEditName(categoryData.name);\n      setIsEditing(false);\n      return;\n    }\n    if (editName.trim() === categoryData.name) {\n      setIsEditing(false);\n      return;\n    }\n    try {\n      setIsSaving(true);\n      await apiClient.updateCategory(categoryData.id, {\n        name: editName.trim()\n      });\n      onRename(categoryData.id, editName.trim());\n      setCategoryData({\n        ...categoryData,\n        name: editName.trim()\n      });\n      setIsEditing(false);\n    } catch (err) {\n      console.error('Error renaming category:', err);\n      setEditName(categoryData.name); // Reset on error\n      alert('Failed to rename category. Please try again.');\n    } finally {\n      setIsSaving(false);\n    }\n  };\n  const handleCancelEdit = () => {\n    setEditName(categoryData.name);\n    setIsEditing(false);\n  };\n  const handleKeyDown = e => {\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      handleRename();\n    } else if (e.key === 'Escape') {\n      handleCancelEdit();\n    }\n  };\n  const handleBlur = e => {\n    const relatedTarget = e.relatedTarget;\n    if (relatedTarget && (relatedTarget.closest('.edit-actions') || relatedTarget.closest('button'))) {\n      return;\n    }\n    setTimeout(() => {\n      if (isEditing) {\n        handleRename();\n      }\n    }, 200);\n  };\n  const handleDelete = async () => {\n    const categoryAsTreeItem = {\n      id: categoryData.id,\n      name: categoryData.name,\n      type: 'folder',\n      parent_id: null,\n      is_folder: true,\n      children: categoryData.children,\n      isExpanded: false,\n      isCategory: true\n    };\n    try {\n      setIsDeleting(true);\n      await handleConditionalDelete(categoryAsTreeItem, () => {\n        onDelete(categoryData.id);\n        onClose();\n      }, error => {\n        console.error('Error deleting category:', error);\n        alert('Failed to delete category');\n      });\n    } finally {\n      setIsDeleting(false);\n    }\n  };\n  const handleAddChild = async name => {\n    try {\n      await apiClient.createCard({\n        name,\n        parent_id: null,\n        is_folder: addType === 'folder',\n        category_id: categoryData.id\n      });\n      await loadCategoryData();\n      setShowAddInput(false);\n    } catch (err) {\n      console.error('Error adding child:', err);\n      alert('Failed to add item');\n    }\n  };\n  const handleAddFolder = () => {\n    setAddType('folder');\n    setShowAddInput(true);\n  };\n  const handleAddCard = () => {\n    setAddType('card');\n    setShowAddInput(true);\n  };\n  const handleAICardSuccess = cardId => {\n    setShowAICardForm(false);\n    loadCategoryData();\n  };\n\n  // Create dropdown menu items for category\n  const getCategoryDropdownItems = () => {\n    return [createEditAction(() => setIsEditing(true)), createAICardAction(() => setShowAICardForm(true)), createDeleteAction(handleDelete)];\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto p-4\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] flex flex-col\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between p-4 sm:p-6 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-indigo-50\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-3 flex-1 min-w-0\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-2 bg-purple-100 rounded-lg flex-shrink-0\",\n            children: /*#__PURE__*/_jsxDEV(Tag, {\n              className: \"h-5 w-5 sm:h-6 sm:w-6 text-purple-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1 min-w-0\",\n            children: isEditing ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: editName,\n                onChange: e => setEditName(e.target.value),\n                onBlur: handleBlur,\n                onKeyDown: handleKeyDown,\n                className: \"flex-1 border border-purple-300 rounded-md px-3 py-1 text-lg sm:text-xl font-bold bg-white text-purple-900 focus:outline-none focus:ring-2 focus:ring-purple-500\",\n                autoFocus: true,\n                disabled: isSaving\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 272,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"edit-actions flex items-center space-x-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: handleRename,\n                  disabled: isSaving || !editName.trim(),\n                  className: \"p-1.5 hover:bg-green-100 rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed\",\n                  title: \"Save\",\n                  children: /*#__PURE__*/_jsxDEV(Check, {\n                    className: \"h-5 w-5 text-green-600\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 289,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 283,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: handleCancelEdit,\n                  disabled: isSaving,\n                  className: \"p-1.5 hover:bg-red-100 rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed\",\n                  title: \"Cancel\",\n                  children: /*#__PURE__*/_jsxDEV(X, {\n                    className: \"h-5 w-5 text-red-600\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 297,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 291,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 282,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"text-lg sm:text-xl font-bold text-purple-900 truncate\",\n                children: categoryData.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 303,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-xs sm:text-sm text-purple-600 mt-1\",\n                children: [categoryData.children.length, \" \", categoryData.children.length === 1 ? 'item' : 'items']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 306,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 11\n        }, this), !isEditing && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-2 mr-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleAddFolder,\n            className: \"p-2 hover:bg-blue-100 rounded-lg bg-blue-50 transition-colors\",\n            title: \"Add folder\",\n            children: /*#__PURE__*/_jsxDEV(Folder, {\n              className: \"h-4 w-4 text-blue-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 322,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleAddCard,\n            className: \"p-2 hover:bg-gray-200 rounded-lg bg-gray-100 transition-colors\",\n            title: \"Add card\",\n            children: /*#__PURE__*/_jsxDEV(Plus, {\n              className: \"h-4 w-4 text-gray-700\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 329,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 13\n        }, this), !isEditing && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mr-2\",\n          children: /*#__PURE__*/_jsxDEV(DropdownMenu, {\n            items: getCategoryDropdownItems(),\n            className: \"opacity-100\",\n            disabled: isDeleting\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 337,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: \"p-2 hover:bg-purple-100 rounded-lg transition-colors flex-shrink-0 ml-2\",\n          title: \"Close\",\n          children: /*#__PURE__*/_jsxDEV(X, {\n            className: \"h-5 w-5 text-purple-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 9\n      }, this), showAddInput && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"px-4 sm:px-6 py-4 bg-gray-50 border-b border-gray-100\",\n        children: /*#__PURE__*/_jsxDEV(AddItemInput, {\n          parentId: null,\n          type: addType,\n          onSubmit: handleAddChild,\n          onCancel: () => setShowAddInput(false),\n          placeholder: `Add ${addType}...`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 overflow-y-auto p-4 sm:p-6\",\n        children: isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-center py-12\",\n          children: [/*#__PURE__*/_jsxDEV(Loader2, {\n            className: \"h-6 w-6 animate-spin text-purple-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 371,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"ml-2 text-gray-600\",\n            children: \"Loading category...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 13\n        }, this) : categoryData.children.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col items-center justify-center py-12 text-gray-500\",\n          children: [/*#__PURE__*/_jsxDEV(Folder, {\n            className: \"h-12 w-12 mb-4 opacity-50\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-lg font-medium mb-2\",\n            children: \"No items in this category\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 377,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-center mb-4\",\n            children: \"Add folders or cards to get started\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 378,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-center space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleAddFolder,\n              className: \"px-4 py-2 text-sm font-medium text-blue-600 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors\",\n              children: \"Add Folder\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 380,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleAddCard,\n              className: \"px-4 py-2 text-sm font-medium text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors\",\n              children: \"Add Card\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 379,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-2\",\n          children: categoryData.children.map(item => /*#__PURE__*/_jsxDEV(TreeNode, {\n            item: item,\n            onToggle: handleToggle,\n            onRename: onRename,\n            onDelete: onDelete,\n            onAddChild: handleAddChildToFolder,\n            onMove: onMove,\n            level: 0,\n            categoryId: category.id,\n            categories: allCategories\n          }, item.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 397,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 9\n      }, this), showAICardForm && /*#__PURE__*/_jsxDEV(AICardForm, {\n        categoryId: categoryData.id,\n        categoryName: categoryData.name,\n        onClose: () => setShowAICardForm(false),\n        onSuccess: handleAICardSuccess\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 416,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 261,\n    columnNumber: 5\n  }, this);\n};\n_s(CategoryView, \"cpyjVNLnTTtcyydqhE5GX5Nhly8=\");\n_c = CategoryView;\nvar _c;\n$RefreshReg$(_c, \"CategoryView\");","map":{"version":3,"names":["React","useState","useEffect","TreeNode","AddItemInput","AICardForm","DropdownMenu","createEditAction","createDeleteAction","createAICardAction","handleConditionalDelete","X","Tag","Loader2","Folder","Plus","Check","apiClient","buildTree","jsxDEV","_jsxDEV","Fragment","_Fragment","CategoryView","category","onClose","onRename","onDelete","onMove","onCategoryRefresh","categories","_s","categoryData","setCategoryData","isLoading","setIsLoading","expandedIds","setExpandedIds","Set","allCategories","setAllCategories","isEditing","setIsEditing","editName","setEditName","name","showAddInput","setShowAddInput","addType","setAddType","isDeleting","setIsDeleting","isSaving","setIsSaving","showAICardForm","setShowAICardForm","loadCategoryData","loadAllCategories","id","cats","getCategories","map","cat","isExpanded","children","err","console","error","cards","getCardsHierarchy","treeData","handleToggle","prev","newSet","has","delete","add","updateTreeExpansion","items","item","handleAddChildToFolder","parentId","type","createCard","parent_id","is_folder","category_id","_err$response","_err$response$data","errorMessage","message","response","data","detail","alert","handleCategoryRefresh","handleRename","trim","updateCategory","handleCancelEdit","handleKeyDown","e","key","preventDefault","handleBlur","relatedTarget","closest","setTimeout","handleDelete","categoryAsTreeItem","isCategory","handleAddChild","handleAddFolder","handleAddCard","handleAICardSuccess","cardId","getCategoryDropdownItems","className","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","target","onBlur","onKeyDown","autoFocus","disabled","onClick","title","length","onSubmit","onCancel","placeholder","onToggle","onAddChild","level","categoryId","categoryName","onSuccess","_c","$RefreshReg$"],"sources":["/Users/tassiobs/Documents/vocatree-fe/src/components/CategoryView.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { CategoryItem, TreeItem } from '../types';\nimport { TreeNode } from './TreeNode';\nimport { AddItemInput } from './AddItemInput';\nimport { AICardForm } from './AICardForm';\nimport { DropdownMenu, DropdownMenuItem, createEditAction, createDeleteAction, createAICardAction } from './DropdownMenu';\nimport { handleConditionalDelete } from '../utils/deleteUtils';\nimport { X, Tag, Loader2, Folder, Plus, Check } from 'lucide-react';\nimport { apiClient } from '../services/api';\nimport { buildTree } from '../utils/treeUtils';\n\ninterface CategoryViewProps {\n  category: CategoryItem;\n  onClose: () => void;\n  onRename: (id: number, newName: string) => void;\n  onDelete: (id: number) => void;\n  onMove: (itemId: number, data: { parent_id?: number | null; category_id?: number | null }) => Promise<void>;\n  onCategoryRefresh: (categoryId: number, expandFolderId?: number) => void;\n  categories?: CategoryItem[];\n}\n\nexport const CategoryView: React.FC<CategoryViewProps> = ({\n  category,\n  onClose,\n  onRename,\n  onDelete,\n  onMove,\n  onCategoryRefresh,\n  categories = [],\n}) => {\n  const [categoryData, setCategoryData] = useState<CategoryItem>(category);\n  const [isLoading, setIsLoading] = useState(false);\n  const [expandedIds, setExpandedIds] = useState<Set<number>>(new Set());\n  const [allCategories, setAllCategories] = useState<CategoryItem[]>(categories);\n  const [isEditing, setIsEditing] = useState(false);\n  const [editName, setEditName] = useState(category.name);\n  const [showAddInput, setShowAddInput] = useState(false);\n  const [addType, setAddType] = useState<'folder' | 'card'>('folder');\n  const [isDeleting, setIsDeleting] = useState(false);\n  const [isSaving, setIsSaving] = useState(false);\n  const [showAICardForm, setShowAICardForm] = useState(false);\n\n  useEffect(() => {\n    loadCategoryData();\n    loadAllCategories();\n  }, [category.id]);\n\n  // Sync editName with category.name when category changes\n  useEffect(() => {\n    if (!isEditing) {\n      setEditName(categoryData.name);\n    }\n  }, [categoryData.name, isEditing]);\n\n  const loadAllCategories = async () => {\n    try {\n      const cats = await apiClient.getCategories();\n      setAllCategories(cats.map((cat) => ({\n        id: cat.id,\n        name: cat.name,\n        isExpanded: false,\n        children: [],\n      })));\n    } catch (err) {\n      console.error('Error loading categories:', err);\n    }\n  };\n\n  const loadCategoryData = async () => {\n    try {\n      setIsLoading(true);\n      const cards = await apiClient.getCardsHierarchy(category.id);\n      const treeData = buildTree(cards, expandedIds);\n      \n      setCategoryData({\n        ...category,\n        children: treeData,\n        isExpanded: true,\n      });\n    } catch (err: any) {\n      console.error('Error loading category data:', err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleToggle = (id: number) => {\n    setExpandedIds((prev) => {\n      const newSet = new Set(prev);\n      if (newSet.has(id)) {\n        newSet.delete(id);\n      } else {\n        newSet.add(id);\n      }\n      \n      // Update the tree items with new expansion state\n      const updateTreeExpansion = (items: TreeItem[]): TreeItem[] => {\n        return items.map((item) => ({\n          ...item,\n          isExpanded: newSet.has(item.id),\n          children: item.children ? updateTreeExpansion(item.children) : [],\n        }));\n      };\n      \n      setCategoryData((prev) => ({\n        ...prev,\n        children: updateTreeExpansion(prev.children),\n      }));\n      \n      return newSet;\n    });\n  };\n\n  const handleAddChildToFolder = async (parentId: number, type: 'folder' | 'card', name: string) => {\n    try {\n      await apiClient.createCard({\n        name,\n        parent_id: parentId,\n        is_folder: type === 'folder',\n        category_id: category.id,\n      });\n\n      // Refresh the category data\n      await loadCategoryData();\n    } catch (err: any) {\n      console.error('Error adding child to folder:', err);\n      const errorMessage = err.message || err.response?.data?.detail || 'Failed to add item';\n      alert(`Failed to add item: ${errorMessage}`);\n    }\n  };\n\n  const handleCategoryRefresh = async () => {\n    await loadCategoryData();\n  };\n\n  const handleRename = async () => {\n    if (!editName.trim()) {\n      setEditName(categoryData.name);\n      setIsEditing(false);\n      return;\n    }\n\n    if (editName.trim() === categoryData.name) {\n      setIsEditing(false);\n      return;\n    }\n\n    try {\n      setIsSaving(true);\n      await apiClient.updateCategory(categoryData.id, { name: editName.trim() });\n      onRename(categoryData.id, editName.trim());\n      setCategoryData({ ...categoryData, name: editName.trim() });\n      setIsEditing(false);\n    } catch (err: any) {\n      console.error('Error renaming category:', err);\n      setEditName(categoryData.name); // Reset on error\n      alert('Failed to rename category. Please try again.');\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  const handleCancelEdit = () => {\n    setEditName(categoryData.name);\n    setIsEditing(false);\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      handleRename();\n    } else if (e.key === 'Escape') {\n      handleCancelEdit();\n    }\n  };\n\n  const handleBlur = (e: React.FocusEvent<HTMLInputElement>) => {\n    const relatedTarget = e.relatedTarget as HTMLElement;\n    if (relatedTarget && (relatedTarget.closest('.edit-actions') || relatedTarget.closest('button'))) {\n      return;\n    }\n    setTimeout(() => {\n      if (isEditing) {\n        handleRename();\n      }\n    }, 200);\n  };\n\n  const handleDelete = async () => {\n    const categoryAsTreeItem = {\n      id: categoryData.id,\n      name: categoryData.name,\n      type: 'folder' as const,\n      parent_id: null,\n      is_folder: true,\n      children: categoryData.children,\n      isExpanded: false,\n      isCategory: true,\n    };\n\n    try {\n      setIsDeleting(true);\n      await handleConditionalDelete(\n        categoryAsTreeItem,\n        () => {\n          onDelete(categoryData.id);\n          onClose();\n        },\n        (error) => {\n          console.error('Error deleting category:', error);\n          alert('Failed to delete category');\n        }\n      );\n    } finally {\n      setIsDeleting(false);\n    }\n  };\n\n  const handleAddChild = async (name: string) => {\n    try {\n      await apiClient.createCard({\n        name,\n        parent_id: null,\n        is_folder: addType === 'folder',\n        category_id: categoryData.id,\n      });\n\n      await loadCategoryData();\n      setShowAddInput(false);\n    } catch (err: any) {\n      console.error('Error adding child:', err);\n      alert('Failed to add item');\n    }\n  };\n\n  const handleAddFolder = () => {\n    setAddType('folder');\n    setShowAddInput(true);\n  };\n\n  const handleAddCard = () => {\n    setAddType('card');\n    setShowAddInput(true);\n  };\n\n  const handleAICardSuccess = (cardId: number) => {\n    setShowAICardForm(false);\n    loadCategoryData();\n  };\n\n  // Create dropdown menu items for category\n  const getCategoryDropdownItems = (): DropdownMenuItem[] => {\n    return [\n      createEditAction(() => setIsEditing(true)),\n      createAICardAction(() => setShowAICardForm(true)),\n      createDeleteAction(handleDelete),\n    ];\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto p-4\">\n      <div className=\"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] flex flex-col\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-4 sm:p-6 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-indigo-50\">\n          <div className=\"flex items-center space-x-3 flex-1 min-w-0\">\n            <div className=\"p-2 bg-purple-100 rounded-lg flex-shrink-0\">\n              <Tag className=\"h-5 w-5 sm:h-6 sm:w-6 text-purple-600\" />\n            </div>\n            <div className=\"flex-1 min-w-0\">\n              {isEditing ? (\n                <div className=\"flex items-center space-x-2\">\n                  <input\n                    type=\"text\"\n                    value={editName}\n                    onChange={(e) => setEditName(e.target.value)}\n                    onBlur={handleBlur}\n                    onKeyDown={handleKeyDown}\n                    className=\"flex-1 border border-purple-300 rounded-md px-3 py-1 text-lg sm:text-xl font-bold bg-white text-purple-900 focus:outline-none focus:ring-2 focus:ring-purple-500\"\n                    autoFocus\n                    disabled={isSaving}\n                  />\n                  <div className=\"edit-actions flex items-center space-x-1\">\n                    <button\n                      onClick={handleRename}\n                      disabled={isSaving || !editName.trim()}\n                      className=\"p-1.5 hover:bg-green-100 rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n                      title=\"Save\"\n                    >\n                      <Check className=\"h-5 w-5 text-green-600\" />\n                    </button>\n                    <button\n                      onClick={handleCancelEdit}\n                      disabled={isSaving}\n                      className=\"p-1.5 hover:bg-red-100 rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n                      title=\"Cancel\"\n                    >\n                      <X className=\"h-5 w-5 text-red-600\" />\n                    </button>\n                  </div>\n                </div>\n              ) : (\n                <>\n                  <h2 className=\"text-lg sm:text-xl font-bold text-purple-900 truncate\">\n                    {categoryData.name}\n                  </h2>\n                  <p className=\"text-xs sm:text-sm text-purple-600 mt-1\">\n                    {categoryData.children.length} {categoryData.children.length === 1 ? 'item' : 'items'}\n                  </p>\n                </>\n              )}\n            </div>\n          </div>\n          \n          {/* Add buttons */}\n          {!isEditing && (\n            <div className=\"flex items-center space-x-2 mr-2\">\n              <button\n                onClick={handleAddFolder}\n                className=\"p-2 hover:bg-blue-100 rounded-lg bg-blue-50 transition-colors\"\n                title=\"Add folder\"\n              >\n                <Folder className=\"h-4 w-4 text-blue-600\" />\n              </button>\n              <button\n                onClick={handleAddCard}\n                className=\"p-2 hover:bg-gray-200 rounded-lg bg-gray-100 transition-colors\"\n                title=\"Add card\"\n              >\n                <Plus className=\"h-4 w-4 text-gray-700\" />\n              </button>\n            </div>\n          )}\n\n          {/* Actions dropdown menu */}\n          {!isEditing && (\n            <div className=\"mr-2\">\n              <DropdownMenu\n                items={getCategoryDropdownItems()}\n                className=\"opacity-100\"\n                disabled={isDeleting}\n              />\n            </div>\n          )}\n\n          <button\n            onClick={onClose}\n            className=\"p-2 hover:bg-purple-100 rounded-lg transition-colors flex-shrink-0 ml-2\"\n            title=\"Close\"\n          >\n            <X className=\"h-5 w-5 text-purple-600\" />\n          </button>\n        </div>\n\n        {/* Add item input */}\n        {showAddInput && (\n          <div className=\"px-4 sm:px-6 py-4 bg-gray-50 border-b border-gray-100\">\n            <AddItemInput\n              parentId={null}\n              type={addType}\n              onSubmit={handleAddChild}\n              onCancel={() => setShowAddInput(false)}\n              placeholder={`Add ${addType}...`}\n            />\n          </div>\n        )}\n\n        {/* Content */}\n        <div className=\"flex-1 overflow-y-auto p-4 sm:p-6\">\n          {isLoading ? (\n            <div className=\"flex items-center justify-center py-12\">\n              <Loader2 className=\"h-6 w-6 animate-spin text-purple-600\" />\n              <span className=\"ml-2 text-gray-600\">Loading category...</span>\n            </div>\n          ) : categoryData.children.length === 0 ? (\n            <div className=\"flex flex-col items-center justify-center py-12 text-gray-500\">\n              <Folder className=\"h-12 w-12 mb-4 opacity-50\" />\n              <p className=\"text-lg font-medium mb-2\">No items in this category</p>\n              <p className=\"text-sm text-center mb-4\">Add folders or cards to get started</p>\n              <div className=\"flex items-center justify-center space-x-2\">\n                <button\n                  onClick={handleAddFolder}\n                  className=\"px-4 py-2 text-sm font-medium text-blue-600 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors\"\n                >\n                  Add Folder\n                </button>\n                <button\n                  onClick={handleAddCard}\n                  className=\"px-4 py-2 text-sm font-medium text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors\"\n                >\n                  Add Card\n                </button>\n              </div>\n            </div>\n          ) : (\n            <div className=\"space-y-2\">\n              {categoryData.children.map((item) => (\n                <TreeNode\n                  key={item.id}\n                  item={item}\n                  onToggle={handleToggle}\n                  onRename={onRename}\n                  onDelete={onDelete}\n                  onAddChild={handleAddChildToFolder}\n                  onMove={onMove}\n                  level={0}\n                  categoryId={category.id}\n                  categories={allCategories}\n                />\n              ))}\n            </div>\n          )}\n        </div>\n\n        {/* AI Card Form Modal */}\n        {showAICardForm && (\n          <AICardForm\n            categoryId={categoryData.id}\n            categoryName={categoryData.name}\n            onClose={() => setShowAICardForm(false)}\n            onSuccess={handleAICardSuccess}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}