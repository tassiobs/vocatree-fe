{"ast":null,"code":"import React,{useState}from'react';import{X,Sparkles,Loader2}from'lucide-react';import{apiClient}from'../services/api';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export const UpdateCardAI=_ref=>{let{card,onClose,onSuccess}=_ref;const[prompt,setPrompt]=useState('');const[isLoading,setIsLoading]=useState(false);const[error,setError]=useState(null);const handleSubmit=async e=>{e.preventDefault();setError(null);setIsLoading(true);try{const updatedCard=await apiClient.aiEnrichCard(card.id,{language:'English',prompt:prompt.trim()||''});// On success, call onSuccess with updated card and close modal\nonSuccess(updatedCard);onClose();}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.detail)||'Failed to update card with AI. Please try again.');console.error('Error updating card with AI:',err);}finally{setIsLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 my-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-6 border-b border-gray-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-10 w-10 flex items-center justify-center rounded-full bg-purple-100\",children:/*#__PURE__*/_jsx(Sparkles,{className:\"h-5 w-5 text-purple-600\"})}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900\",children:\"Update Card using AI\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,disabled:isLoading,className:\"p-2 hover:bg-gray-100 rounded-full transition-colors disabled:opacity-50\",title:\"Close\",children:/*#__PURE__*/_jsx(X,{className:\"h-5 w-5 text-gray-600\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[error&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 bg-red-50 text-red-700 p-3 rounded-md text-sm\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Card Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:card.name,disabled:true,className:\"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-600 cursor-not-allowed\",readOnly:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"prompt\",className:\"block text-sm font-medium text-gray-700 mb-2\",children:[\"Prompt \",/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500 font-normal\",children:\"(optional)\"})]}),/*#__PURE__*/_jsx(\"textarea\",{id:\"prompt\",value:prompt,onChange:e=>setPrompt(e.target.value),disabled:isLoading,rows:4,placeholder:\"Describe how you want the card to be updated (e.g., 'Add more example phrases', 'Expand meanings with more details')...\",className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 disabled:bg-gray-50 disabled:cursor-not-allowed\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-50 border border-blue-200 rounded-md p-3\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-blue-800\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Note:\"}),\" When you submit, the AI-generated result will overwrite the existing card content.\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-end space-x-3 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onClose,disabled:isLoading,className:\"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isLoading,className:\"px-4 py-2 text-white bg-purple-600 rounded-md hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center\",children:isLoading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Loader2,{className:\"h-4 w-4 mr-2 animate-spin\"}),\"Updating...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Sparkles,{className:\"h-4 w-4 mr-2\"}),\"Update Card\"]})})]})]})]})]})});};","map":{"version":3,"names":["React","useState","X","Sparkles","Loader2","apiClient","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","UpdateCardAI","_ref","card","onClose","onSuccess","prompt","setPrompt","isLoading","setIsLoading","error","setError","handleSubmit","e","preventDefault","updatedCard","aiEnrichCard","id","language","trim","err","_err$response","_err$response$data","response","data","detail","console","className","children","onClick","disabled","title","onSubmit","type","value","name","readOnly","htmlFor","onChange","target","rows","placeholder"],"sources":["/Users/tassiobs/Documents/vocatree-fe/src/components/UpdateCardAI.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { X, Sparkles, Loader2 } from 'lucide-react';\nimport { apiClient } from '../services/api';\nimport { Card } from '../types/api';\n\ninterface UpdateCardAIProps {\n  card: Card;\n  onClose: () => void;\n  onSuccess: (updatedCard: Card) => void;\n}\n\nexport const UpdateCardAI: React.FC<UpdateCardAIProps> = ({ card, onClose, onSuccess }) => {\n  const [prompt, setPrompt] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(null);\n    setIsLoading(true);\n\n    try {\n      const updatedCard = await apiClient.aiEnrichCard(card.id, {\n        language: 'English',\n        prompt: prompt.trim() || '',\n      });\n      \n      // On success, call onSuccess with updated card and close modal\n      onSuccess(updatedCard);\n      onClose();\n    } catch (err: any) {\n      setError(err.response?.data?.detail || 'Failed to update card with AI. Please try again.');\n      console.error('Error updating card with AI:', err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto\">\n      <div className=\"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 my-8\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"h-10 w-10 flex items-center justify-center rounded-full bg-purple-100\">\n              <Sparkles className=\"h-5 w-5 text-purple-600\" />\n            </div>\n            <h2 className=\"text-2xl font-bold text-gray-900\">Update Card using AI</h2>\n          </div>\n          <button\n            onClick={onClose}\n            disabled={isLoading}\n            className=\"p-2 hover:bg-gray-100 rounded-full transition-colors disabled:opacity-50\"\n            title=\"Close\"\n          >\n            <X className=\"h-5 w-5 text-gray-600\" />\n          </button>\n        </div>\n\n        {/* Content */}\n        <div className=\"p-6\">\n          {error && (\n            <div className=\"mb-4 bg-red-50 text-red-700 p-3 rounded-md text-sm\">\n              {error}\n            </div>\n          )}\n\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            {/* Card Name (Read-only) */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Card Name\n              </label>\n              <input\n                type=\"text\"\n                value={card.name}\n                disabled\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-600 cursor-not-allowed\"\n                readOnly\n              />\n            </div>\n\n            {/* Prompt (Optional) */}\n            <div>\n              <label htmlFor=\"prompt\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Prompt <span className=\"text-gray-500 font-normal\">(optional)</span>\n              </label>\n              <textarea\n                id=\"prompt\"\n                value={prompt}\n                onChange={(e) => setPrompt(e.target.value)}\n                disabled={isLoading}\n                rows={4}\n                placeholder=\"Describe how you want the card to be updated (e.g., 'Add more example phrases', 'Expand meanings with more details')...\"\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 disabled:bg-gray-50 disabled:cursor-not-allowed\"\n              />\n            </div>\n\n            {/* Helper Text */}\n            <div className=\"bg-blue-50 border border-blue-200 rounded-md p-3\">\n              <p className=\"text-sm text-blue-800\">\n                <strong>Note:</strong> When you submit, the AI-generated result will overwrite the existing card content.\n              </p>\n            </div>\n\n            {/* Footer */}\n            <div className=\"flex items-center justify-end space-x-3 pt-4\">\n              <button\n                type=\"button\"\n                onClick={onClose}\n                disabled={isLoading}\n                className=\"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                Cancel\n              </button>\n              <button\n                type=\"submit\"\n                disabled={isLoading}\n                className=\"px-4 py-2 text-white bg-purple-600 rounded-md hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center\"\n              >\n                {isLoading ? (\n                  <>\n                    <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                    Updating...\n                  </>\n                ) : (\n                  <>\n                    <Sparkles className=\"h-4 w-4 mr-2\" />\n                    Update Card\n                  </>\n                )}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,CAAC,CAAEC,QAAQ,CAAEC,OAAO,KAAQ,cAAc,CACnD,OAASC,SAAS,KAAQ,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAS5C,MAAO,MAAM,CAAAC,YAAyC,CAAGC,IAAA,EAAkC,IAAjC,CAAEC,IAAI,CAAEC,OAAO,CAAEC,SAAU,CAAC,CAAAH,IAAA,CACpF,KAAM,CAACI,MAAM,CAAEC,SAAS,CAAC,CAAGjB,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACkB,SAAS,CAAEC,YAAY,CAAC,CAAGnB,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAACoB,KAAK,CAAEC,QAAQ,CAAC,CAAGrB,QAAQ,CAAgB,IAAI,CAAC,CAEvD,KAAM,CAAAsB,YAAY,CAAG,KAAO,CAAAC,CAAkB,EAAK,CACjDA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBH,QAAQ,CAAC,IAAI,CAAC,CACdF,YAAY,CAAC,IAAI,CAAC,CAElB,GAAI,CACF,KAAM,CAAAM,WAAW,CAAG,KAAM,CAAArB,SAAS,CAACsB,YAAY,CAACb,IAAI,CAACc,EAAE,CAAE,CACxDC,QAAQ,CAAE,SAAS,CACnBZ,MAAM,CAAEA,MAAM,CAACa,IAAI,CAAC,CAAC,EAAI,EAC3B,CAAC,CAAC,CAEF;AACAd,SAAS,CAACU,WAAW,CAAC,CACtBX,OAAO,CAAC,CAAC,CACX,CAAE,MAAOgB,GAAQ,CAAE,KAAAC,aAAA,CAAAC,kBAAA,CACjBX,QAAQ,CAAC,EAAAU,aAAA,CAAAD,GAAG,CAACG,QAAQ,UAAAF,aAAA,kBAAAC,kBAAA,CAAZD,aAAA,CAAcG,IAAI,UAAAF,kBAAA,iBAAlBA,kBAAA,CAAoBG,MAAM,GAAI,kDAAkD,CAAC,CAC1FC,OAAO,CAAChB,KAAK,CAAC,8BAA8B,CAAEU,GAAG,CAAC,CACpD,CAAC,OAAS,CACRX,YAAY,CAAC,KAAK,CAAC,CACrB,CACF,CAAC,CAED,mBACEb,IAAA,QAAK+B,SAAS,CAAC,4FAA4F,CAAAC,QAAA,cACzG9B,KAAA,QAAK6B,SAAS,CAAC,yDAAyD,CAAAC,QAAA,eAEtE9B,KAAA,QAAK6B,SAAS,CAAC,gEAAgE,CAAAC,QAAA,eAC7E9B,KAAA,QAAK6B,SAAS,CAAC,6BAA6B,CAAAC,QAAA,eAC1ChC,IAAA,QAAK+B,SAAS,CAAC,uEAAuE,CAAAC,QAAA,cACpFhC,IAAA,CAACJ,QAAQ,EAACmC,SAAS,CAAC,yBAAyB,CAAE,CAAC,CAC7C,CAAC,cACN/B,IAAA,OAAI+B,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAC,sBAAoB,CAAI,CAAC,EACvE,CAAC,cACNhC,IAAA,WACEiC,OAAO,CAAEzB,OAAQ,CACjB0B,QAAQ,CAAEtB,SAAU,CACpBmB,SAAS,CAAC,0EAA0E,CACpFI,KAAK,CAAC,OAAO,CAAAH,QAAA,cAEbhC,IAAA,CAACL,CAAC,EAACoC,SAAS,CAAC,uBAAuB,CAAE,CAAC,CACjC,CAAC,EACN,CAAC,cAGN7B,KAAA,QAAK6B,SAAS,CAAC,KAAK,CAAAC,QAAA,EACjBlB,KAAK,eACJd,IAAA,QAAK+B,SAAS,CAAC,oDAAoD,CAAAC,QAAA,CAChElB,KAAK,CACH,CACN,cAEDZ,KAAA,SAAMkC,QAAQ,CAAEpB,YAAa,CAACe,SAAS,CAAC,WAAW,CAAAC,QAAA,eAEjD9B,KAAA,QAAA8B,QAAA,eACEhC,IAAA,UAAO+B,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,WAEhE,CAAO,CAAC,cACRhC,IAAA,UACEqC,IAAI,CAAC,MAAM,CACXC,KAAK,CAAE/B,IAAI,CAACgC,IAAK,CACjBL,QAAQ,MACRH,SAAS,CAAC,gGAAgG,CAC1GS,QAAQ,MACT,CAAC,EACC,CAAC,cAGNtC,KAAA,QAAA8B,QAAA,eACE9B,KAAA,UAAOuC,OAAO,CAAC,QAAQ,CAACV,SAAS,CAAC,8CAA8C,CAAAC,QAAA,EAAC,SACxE,cAAAhC,IAAA,SAAM+B,SAAS,CAAC,2BAA2B,CAAAC,QAAA,CAAC,YAAU,CAAM,CAAC,EAC/D,CAAC,cACRhC,IAAA,aACEqB,EAAE,CAAC,QAAQ,CACXiB,KAAK,CAAE5B,MAAO,CACdgC,QAAQ,CAAGzB,CAAC,EAAKN,SAAS,CAACM,CAAC,CAAC0B,MAAM,CAACL,KAAK,CAAE,CAC3CJ,QAAQ,CAAEtB,SAAU,CACpBgC,IAAI,CAAE,CAAE,CACRC,WAAW,CAAC,yHAAyH,CACrId,SAAS,CAAC,0JAA0J,CACrK,CAAC,EACC,CAAC,cAGN/B,IAAA,QAAK+B,SAAS,CAAC,kDAAkD,CAAAC,QAAA,cAC/D9B,KAAA,MAAG6B,SAAS,CAAC,uBAAuB,CAAAC,QAAA,eAClChC,IAAA,WAAAgC,QAAA,CAAQ,OAAK,CAAQ,CAAC,sFACxB,EAAG,CAAC,CACD,CAAC,cAGN9B,KAAA,QAAK6B,SAAS,CAAC,8CAA8C,CAAAC,QAAA,eAC3DhC,IAAA,WACEqC,IAAI,CAAC,QAAQ,CACbJ,OAAO,CAAEzB,OAAQ,CACjB0B,QAAQ,CAAEtB,SAAU,CACpBmB,SAAS,CAAC,qIAAqI,CAAAC,QAAA,CAChJ,QAED,CAAQ,CAAC,cACThC,IAAA,WACEqC,IAAI,CAAC,QAAQ,CACbH,QAAQ,CAAEtB,SAAU,CACpBmB,SAAS,CAAC,qIAAqI,CAAAC,QAAA,CAE9IpB,SAAS,cACRV,KAAA,CAAAE,SAAA,EAAA4B,QAAA,eACEhC,IAAA,CAACH,OAAO,EAACkC,SAAS,CAAC,2BAA2B,CAAE,CAAC,cAEnD,EAAE,CAAC,cAEH7B,KAAA,CAAAE,SAAA,EAAA4B,QAAA,eACEhC,IAAA,CAACJ,QAAQ,EAACmC,SAAS,CAAC,cAAc,CAAE,CAAC,cAEvC,EAAE,CACH,CACK,CAAC,EACN,CAAC,EACF,CAAC,EACJ,CAAC,EACH,CAAC,CACH,CAAC,CAEV,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}