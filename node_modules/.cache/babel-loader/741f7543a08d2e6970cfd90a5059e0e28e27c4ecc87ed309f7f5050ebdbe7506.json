{"ast":null,"code":"import _objectSpread from\"/Users/tassiobs/Documents/vocatree-fe/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback}from'react';import{CategoryNode}from'./CategoryNode';import{AddItemInput}from'./AddItemInput';import{AITreeGenerator}from'./AITreeGenerator';import{apiClient}from'../services/api';import{buildTree,updateTreeItem,removeTreeItem,findTreeItem,getExpandedIds}from'../utils/treeUtils';import{Loader2,Sparkles,Tag}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const VocabTree=()=>{const[categories,setCategories]=useState([]);const[isLoading,setIsLoading]=useState(true);const[error,setError]=useState(null);const[showAIGenerator,setShowAIGenerator]=useState(false);const[showAddCategory,setShowAddCategory]=useState(false);// Load initial data\nuseEffect(()=>{loadCategories();},[]);const loadCategories=async()=>{try{setIsLoading(true);setError(null);// First try to get categories\nlet categoriesData;try{categoriesData=await apiClient.getCategories();console.log('Categories response:',categoriesData);}catch(categoryErr){console.error('Categories endpoint error:',categoryErr);// If categories endpoint doesn't exist, fall back to loading all cards without categories\nconst allCards=await apiClient.getCardsHierarchy();const treeData=buildTree(allCards);// Create a default \"All Items\" category\nsetCategories([{id:0,name:'All Items',isExpanded:true,children:treeData}]);setIsLoading(false);return;}const categoriesWithChildren=await Promise.all(categoriesData.map(async category=>{try{const cards=await apiClient.getCardsHierarchy(category.id);const treeData=buildTree(cards);return{id:category.id,name:category.name,isExpanded:false,children:treeData};}catch(err){console.error(\"Error loading cards for category \".concat(category.id,\":\"),err);return{id:category.id,name:category.name,isExpanded:false,children:[]};}}));setCategories(categoriesWithChildren);}catch(err){var _err$response,_err$response$data;console.error('Error loading categories:',err);setError(\"Failed to load categories: \".concat(err.message||((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.detail)||'Unknown error'));}finally{setIsLoading(false);}};const handleToggle=useCallback(id=>{setCategories(prevCategories=>prevCategories.map(category=>{var _findTreeItem;if(category.id===id){return _objectSpread(_objectSpread({},category),{},{isExpanded:!category.isExpanded});}return _objectSpread(_objectSpread({},category),{},{children:updateTreeItem(category.children,id,{isExpanded:!((_findTreeItem=findTreeItem(category.children,id))!==null&&_findTreeItem!==void 0&&_findTreeItem.isExpanded)})});}));},[]);const handleRename=useCallback(async(id,newName)=>{try{// Check if this is a category rename\n// Note: CategoryNode already makes the API call for categories, so we only update UI\n// For non-categories (cards/folders), we need to make the API call\nconst isCategory=categories.some(cat=>cat.id===id);if(!isCategory){// For non-categories, make the API call\nawait apiClient.updateCard(id,{name:newName});}// Update UI state for both categories and non-categories\nsetCategories(prevCategories=>prevCategories.map(category=>{// Check if this is a category rename\nif(category.id===id){return _objectSpread(_objectSpread({},category),{},{name:newName});}// Otherwise, update children\nreturn _objectSpread(_objectSpread({},category),{},{children:updateTreeItem(category.children,id,{name:newName})});}));}catch(err){var _err$response2,_err$response2$data;setError(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.detail)||'Failed to rename item');console.error('Error renaming item:',err);}},[categories]);const handleDelete=useCallback(id=>{// This function is called after the API delete has already been handled by handleConditionalDelete\n// We just need to update the UI state\nconsole.log(\"VocabTree handleDelete called for item \".concat(id,\" - updating UI only\"));setCategories(prevCategories=>prevCategories.map(category=>_objectSpread(_objectSpread({},category),{},{children:removeTreeItem(category.children,id)})));},[]);const handleCategoryRefresh=useCallback(async(categoryId,expandFolderId)=>{try{setCategories(prevCategories=>{// Find the category to get current expanded state\nconst currentCategory=prevCategories.find(cat=>cat.id===categoryId);// Get currently expanded IDs\nconst expandedIds=currentCategory?getExpandedIds(currentCategory.children):new Set();// If we have a folder to expand, add it to the set\nif(expandFolderId){expandedIds.add(expandFolderId);}return prevCategories;// Return unchanged for now, will update after fetch\n});const updatedCards=await apiClient.getCardsHierarchy(categoryId);setCategories(prevCategories=>{const currentCategory=prevCategories.find(cat=>cat.id===categoryId);const expandedIds=currentCategory?getExpandedIds(currentCategory.children):new Set();if(expandFolderId){expandedIds.add(expandFolderId);}const updatedTreeData=buildTree(updatedCards,expandedIds);return prevCategories.map(category=>{if(category.id===categoryId){return _objectSpread(_objectSpread({},category),{},{children:updatedTreeData,isExpanded:true// Auto-expand when adding children\n});}return category;});});}catch(err){console.error('Error refreshing category:',err);}},[]);const handleAddCategory=async name=>{try{const newCategory=await apiClient.createCategory(name);const newCategoryItem={id:newCategory.id,name:newCategory.name,isExpanded:false,children:[]};setCategories(prevCategories=>[...prevCategories,newCategoryItem]);setShowAddCategory(false);}catch(err){var _err$response3,_err$response3$data;console.error('Error adding category:',err);setError(\"Failed to add category: \".concat(err.message||((_err$response3=err.response)===null||_err$response3===void 0?void 0:(_err$response3$data=_err$response3.data)===null||_err$response3$data===void 0?void 0:_err$response3$data.detail)||'Unknown error'));}};const handleMove=useCallback(async(itemId,data)=>{try{await apiClient.moveCard(itemId,data);// Reload categories to reflect the move\nawait loadCategories();}catch(err){var _err$response4,_err$response4$data;setError(((_err$response4=err.response)===null||_err$response4===void 0?void 0:(_err$response4$data=_err$response4.data)===null||_err$response4$data===void 0?void 0:_err$response4$data.detail)||'Failed to move item');console.error('Error moving item:',err);throw err;}},[]);const handleAIGeneratorSuccess=()=>{loadCategories();// Reload categories after AI generation\n};// Note: flattenTree utility is available for future drag and drop enhancements\nif(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(Loader2,{className:\"h-6 w-6 animate-spin text-primary-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"Loading vocabulary tree...\"})]})});}if(error){return/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-md bg-red-50 p-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-red-700\",children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:loadCategories,className:\"mt-2 text-sm text-red-600 hover:text-red-800 underline\",children:\"Try again\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:\"Vocabulary Tree\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowAIGenerator(true),className:\"flex items-center space-x-1 px-3 py-2 text-sm font-medium text-white bg-purple-600 hover:bg-purple-700 rounded-md transition-colors\",children:[/*#__PURE__*/_jsx(Sparkles,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Generate with AI\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowAddCategory(true),className:\"flex items-center space-x-1 px-3 py-2 text-sm font-medium text-white bg-green-600 hover:bg-green-700 rounded-md transition-colors\",children:[/*#__PURE__*/_jsx(Tag,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Add Category\"})]})]})]}),showAddCategory&&/*#__PURE__*/_jsx(\"div\",{className:\"border border-gray-200 rounded-lg p-4 bg-gray-50\",children:/*#__PURE__*/_jsx(AddItemInput,{parentId:null,type:\"folder\",onSubmit:handleAddCategory,onCancel:()=>setShowAddCategory(false),placeholder:\"Add category...\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:categories.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center py-12 text-gray-500 border border-gray-200 rounded-lg bg-white\",children:[/*#__PURE__*/_jsx(Tag,{className:\"h-12 w-12 mb-4 opacity-50\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-medium mb-2\",children:\"No categories yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm mb-4\",children:\"Start by adding your first category\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAddCategory(true),className:\"px-4 py-2 text-sm font-medium text-white bg-green-600 hover:bg-green-700 rounded-md\",children:\"Add Category\"})]}):categories.map(category=>/*#__PURE__*/_jsx(CategoryNode,{category:category,onToggle:handleToggle,onRename:handleRename,onDelete:handleDelete,onAddChild:()=>{}// Not used anymore\n,onMove:handleMove,onCategoryUpdate:loadCategories,onCategoryRefresh:handleCategoryRefresh,categories:categories},category.id))}),showAIGenerator&&/*#__PURE__*/_jsx(AITreeGenerator,{onClose:()=>setShowAIGenerator(false),onSuccess:handleAIGeneratorSuccess})]});};","map":{"version":3,"names":["React","useState","useEffect","useCallback","CategoryNode","AddItemInput","AITreeGenerator","apiClient","buildTree","updateTreeItem","removeTreeItem","findTreeItem","getExpandedIds","Loader2","Sparkles","Tag","jsx","_jsx","jsxs","_jsxs","VocabTree","categories","setCategories","isLoading","setIsLoading","error","setError","showAIGenerator","setShowAIGenerator","showAddCategory","setShowAddCategory","loadCategories","categoriesData","getCategories","console","log","categoryErr","allCards","getCardsHierarchy","treeData","id","name","isExpanded","children","categoriesWithChildren","Promise","all","map","category","cards","err","concat","_err$response","_err$response$data","message","response","data","detail","handleToggle","prevCategories","_findTreeItem","_objectSpread","handleRename","newName","isCategory","some","cat","updateCard","_err$response2","_err$response2$data","handleDelete","handleCategoryRefresh","categoryId","expandFolderId","currentCategory","find","expandedIds","Set","add","updatedCards","updatedTreeData","handleAddCategory","newCategory","createCategory","newCategoryItem","_err$response3","_err$response3$data","handleMove","itemId","moveCard","_err$response4","_err$response4$data","handleAIGeneratorSuccess","className","onClick","parentId","type","onSubmit","onCancel","placeholder","length","onToggle","onRename","onDelete","onAddChild","onMove","onCategoryUpdate","onCategoryRefresh","onClose","onSuccess"],"sources":["/Users/tassiobs/Documents/vocatree-fe/src/components/VocabTree.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { CategoryItem } from '../types';\nimport { CategoryNode } from './CategoryNode';\nimport { AddItemInput } from './AddItemInput';\nimport { AITreeGenerator } from './AITreeGenerator';\nimport { apiClient } from '../services/api';\nimport { buildTree, updateTreeItem, removeTreeItem, moveTreeItem, findTreeItem, getExpandedIds } from '../utils/treeUtils';\nimport { Loader2, Sparkles, Tag } from 'lucide-react';\n\nexport const VocabTree: React.FC = () => {\n  const [categories, setCategories] = useState<CategoryItem[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [showAIGenerator, setShowAIGenerator] = useState(false);\n  const [showAddCategory, setShowAddCategory] = useState(false);\n\n  // Load initial data\n  useEffect(() => {\n    loadCategories();\n  }, []);\n\n  const loadCategories = async () => {\n    try {\n      setIsLoading(true);\n      setError(null);\n      \n      // First try to get categories\n      let categoriesData;\n      try {\n        categoriesData = await apiClient.getCategories();\n        console.log('Categories response:', categoriesData);\n      } catch (categoryErr: any) {\n        console.error('Categories endpoint error:', categoryErr);\n        // If categories endpoint doesn't exist, fall back to loading all cards without categories\n        const allCards = await apiClient.getCardsHierarchy();\n        const treeData = buildTree(allCards);\n        \n        // Create a default \"All Items\" category\n        setCategories([{\n          id: 0,\n          name: 'All Items',\n          isExpanded: true,\n          children: treeData,\n        }]);\n        setIsLoading(false);\n        return;\n      }\n      \n      const categoriesWithChildren = await Promise.all(\n        categoriesData.map(async (category) => {\n          try {\n            const cards = await apiClient.getCardsHierarchy(category.id);\n            const treeData = buildTree(cards);\n            return {\n              id: category.id,\n              name: category.name,\n              isExpanded: false,\n              children: treeData,\n            };\n          } catch (err: any) {\n            console.error(`Error loading cards for category ${category.id}:`, err);\n            return {\n              id: category.id,\n              name: category.name,\n              isExpanded: false,\n              children: [],\n            };\n          }\n        })\n      );\n      setCategories(categoriesWithChildren);\n    } catch (err: any) {\n      console.error('Error loading categories:', err);\n      setError(`Failed to load categories: ${err.message || err.response?.data?.detail || 'Unknown error'}`);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleToggle = useCallback((id: number) => {\n    setCategories(prevCategories => \n      prevCategories.map(category => {\n        if (category.id === id) {\n          return { ...category, isExpanded: !category.isExpanded };\n        }\n        return {\n          ...category,\n          children: updateTreeItem(category.children, id, { \n            isExpanded: !findTreeItem(category.children, id)?.isExpanded \n          })\n        };\n      })\n    );\n  }, []);\n\n  const handleRename = useCallback(async (id: number, newName: string) => {\n    try {\n      // Check if this is a category rename\n      // Note: CategoryNode already makes the API call for categories, so we only update UI\n      // For non-categories (cards/folders), we need to make the API call\n      const isCategory = categories.some(cat => cat.id === id);\n      \n      if (!isCategory) {\n        // For non-categories, make the API call\n        await apiClient.updateCard(id, { name: newName });\n      }\n      \n      // Update UI state for both categories and non-categories\n      setCategories(prevCategories => \n        prevCategories.map(category => {\n          // Check if this is a category rename\n          if (category.id === id) {\n            return { ...category, name: newName };\n          }\n          // Otherwise, update children\n          return {\n            ...category,\n            children: updateTreeItem(category.children, id, { name: newName })\n          };\n        })\n      );\n    } catch (err: any) {\n      setError(err.response?.data?.detail || 'Failed to rename item');\n      console.error('Error renaming item:', err);\n    }\n  }, [categories]);\n\n  const handleDelete = useCallback((id: number) => {\n    // This function is called after the API delete has already been handled by handleConditionalDelete\n    // We just need to update the UI state\n    console.log(`VocabTree handleDelete called for item ${id} - updating UI only`);\n    setCategories(prevCategories => \n      prevCategories.map(category => ({\n        ...category,\n        children: removeTreeItem(category.children, id)\n      }))\n    );\n  }, []);\n\n  const handleCategoryRefresh = useCallback(async (categoryId: number, expandFolderId?: number) => {\n    try {\n      setCategories(prevCategories => {\n        // Find the category to get current expanded state\n        const currentCategory = prevCategories.find(cat => cat.id === categoryId);\n        \n        // Get currently expanded IDs\n        const expandedIds = currentCategory ? getExpandedIds(currentCategory.children) : new Set<number>();\n        \n        // If we have a folder to expand, add it to the set\n        if (expandFolderId) {\n          expandedIds.add(expandFolderId);\n        }\n        \n        return prevCategories; // Return unchanged for now, will update after fetch\n      });\n      \n      const updatedCards = await apiClient.getCardsHierarchy(categoryId);\n      \n      setCategories(prevCategories => {\n        const currentCategory = prevCategories.find(cat => cat.id === categoryId);\n        const expandedIds = currentCategory ? getExpandedIds(currentCategory.children) : new Set<number>();\n        \n        if (expandFolderId) {\n          expandedIds.add(expandFolderId);\n        }\n        \n        const updatedTreeData = buildTree(updatedCards, expandedIds);\n        \n        return prevCategories.map(category => {\n          if (category.id === categoryId) {\n            return {\n              ...category,\n              children: updatedTreeData,\n              isExpanded: true, // Auto-expand when adding children\n            };\n          }\n          return category;\n        });\n      });\n    } catch (err: any) {\n      console.error('Error refreshing category:', err);\n    }\n  }, []);\n\n  const handleAddCategory = async (name: string) => {\n    try {\n      const newCategory = await apiClient.createCategory(name);\n      const newCategoryItem: CategoryItem = {\n        id: newCategory.id,\n        name: newCategory.name,\n        isExpanded: false,\n        children: [],\n      };\n\n      setCategories(prevCategories => [...prevCategories, newCategoryItem]);\n      setShowAddCategory(false);\n    } catch (err: any) {\n      console.error('Error adding category:', err);\n      setError(`Failed to add category: ${err.message || err.response?.data?.detail || 'Unknown error'}`);\n    }\n  };\n\n  const handleMove = useCallback(async (itemId: number, data: { parent_id?: number | null; category_id?: number | null }) => {\n    try {\n      await apiClient.moveCard(itemId, data);\n      // Reload categories to reflect the move\n      await loadCategories();\n    } catch (err: any) {\n      setError(err.response?.data?.detail || 'Failed to move item');\n      console.error('Error moving item:', err);\n      throw err;\n    }\n  }, []);\n\n\n\n  const handleAIGeneratorSuccess = () => {\n    loadCategories(); // Reload categories after AI generation\n  };\n\n  // Note: flattenTree utility is available for future drag and drop enhancements\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"flex items-center space-x-2\">\n          <Loader2 className=\"h-6 w-6 animate-spin text-primary-600\" />\n          <span className=\"text-gray-600\">Loading vocabulary tree...</span>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"rounded-md bg-red-50 p-4\">\n        <div className=\"text-sm text-red-700\">{error}</div>\n        <button\n          onClick={loadCategories}\n          className=\"mt-2 text-sm text-red-600 hover:text-red-800 underline\"\n        >\n          Try again\n        </button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <h1 className=\"text-2xl font-bold text-gray-900\">Vocabulary Tree</h1>\n        <div className=\"flex items-center space-x-2\">\n          <button\n            onClick={() => setShowAIGenerator(true)}\n            className=\"flex items-center space-x-1 px-3 py-2 text-sm font-medium text-white bg-purple-600 hover:bg-purple-700 rounded-md transition-colors\"\n          >\n            <Sparkles className=\"h-4 w-4\" />\n            <span>Generate with AI</span>\n          </button>\n          <button\n            onClick={() => setShowAddCategory(true)}\n            className=\"flex items-center space-x-1 px-3 py-2 text-sm font-medium text-white bg-green-600 hover:bg-green-700 rounded-md transition-colors\"\n          >\n            <Tag className=\"h-4 w-4\" />\n            <span>Add Category</span>\n          </button>\n        </div>\n      </div>\n\n      {/* Add category input */}\n      {showAddCategory && (\n        <div className=\"border border-gray-200 rounded-lg p-4 bg-gray-50\">\n          <AddItemInput\n            parentId={null}\n            type=\"folder\"\n            onSubmit={handleAddCategory}\n            onCancel={() => setShowAddCategory(false)}\n            placeholder=\"Add category...\"\n          />\n        </div>\n      )}\n\n      {/* Categories */}\n      <div className=\"space-y-4\">\n        {categories.length === 0 ? (\n          <div className=\"flex flex-col items-center justify-center py-12 text-gray-500 border border-gray-200 rounded-lg bg-white\">\n            <Tag className=\"h-12 w-12 mb-4 opacity-50\" />\n            <p className=\"text-lg font-medium mb-2\">No categories yet</p>\n            <p className=\"text-sm mb-4\">Start by adding your first category</p>\n            <button\n              onClick={() => setShowAddCategory(true)}\n              className=\"px-4 py-2 text-sm font-medium text-white bg-green-600 hover:bg-green-700 rounded-md\"\n            >\n              Add Category\n            </button>\n          </div>\n        ) : (\n          categories.map((category) => (\n            <CategoryNode\n              key={category.id}\n              category={category}\n              onToggle={handleToggle}\n              onRename={handleRename}\n              onDelete={handleDelete}\n              onAddChild={() => {}} // Not used anymore\n              onMove={handleMove}\n              onCategoryUpdate={loadCategories}\n              onCategoryRefresh={handleCategoryRefresh}\n              categories={categories}\n            />\n          ))\n        )}\n      </div>\n\n      {/* AI Tree Generator Modal */}\n      {showAIGenerator && (\n        <AITreeGenerator\n          onClose={() => setShowAIGenerator(false)}\n          onSuccess={handleAIGeneratorSuccess}\n        />\n      )}\n    </div>\n  );\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}