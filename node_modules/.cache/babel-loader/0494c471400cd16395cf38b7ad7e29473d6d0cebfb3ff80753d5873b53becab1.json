{"ast":null,"code":"var _jsxFileName = \"/Users/tassiobs/Documents/vocatree-fe/src/components/FolderView.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { TreeNode } from './TreeNode';\nimport { AddItemInput } from './AddItemInput';\nimport { AICardForm } from './AICardForm';\nimport { UpdateCardAI } from './UpdateCardAI';\nimport { DropdownMenu, createEditAction, createDeleteAction, createPracticeFolderAction } from './DropdownMenu';\nimport { FolderPracticeSession } from './FolderPracticeSession';\nimport { handleConditionalDelete } from '../utils/deleteUtils';\nimport { MoveToModal } from './MoveToModal';\nimport { X, Folder, Loader2, FileText, Plus, Check, Move, Sparkles } from 'lucide-react';\nimport { apiClient } from '../services/api';\nimport { cardToTreeItem } from '../utils/treeUtils';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const FolderView = ({\n  folder,\n  onClose,\n  onRename,\n  onDelete,\n  onMove,\n  onRefresh,\n  categories = []\n}) => {\n  _s();\n  var _categories$find;\n  const [folderData, setFolderData] = useState(folder);\n  const [isLoading, setIsLoading] = useState(false);\n  const [expandedIds, setExpandedIds] = useState(new Set());\n  const [isEditing, setIsEditing] = useState(false);\n  const [editName, setEditName] = useState(folder.name);\n  const [showAddInput, setShowAddInput] = useState(false);\n  const [addType, setAddType] = useState('card');\n  const [isDeleting, setIsDeleting] = useState(false);\n  const [isSaving, setIsSaving] = useState(false);\n  const [showAICardForm, setShowAICardForm] = useState(false);\n  const [showMoveToModal, setShowMoveToModal] = useState(false);\n  const [showPracticeSession, setShowPracticeSession] = useState(false);\n  const [showUpdateAI, setShowUpdateAI] = useState(false);\n  const [folderCard, setFolderCard] = useState(null);\n  const isRootFolder = folder.parent_id === null;\n  useEffect(() => {\n    loadFolderData();\n  }, [folder.id]);\n\n  // Sync editName with folder.name when folder changes\n  useEffect(() => {\n    if (!isEditing) {\n      setEditName(folderData.name);\n    }\n  }, [folderData.name, isEditing]);\n  const loadFolderData = async () => {\n    try {\n      setIsLoading(true);\n      // Get the folder's direct children\n      const response = await apiClient.getCardsByParent(folder.id);\n      const children = response.items.map(card => cardToTreeItem(card));\n      setFolderData({\n        ...folder,\n        children: children\n      });\n    } catch (err) {\n      console.error('Error loading folder data:', err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const handleToggle = id => {\n    setExpandedIds(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(id)) {\n        newSet.delete(id);\n      } else {\n        newSet.add(id);\n      }\n\n      // Update the tree items with new expansion state\n      const updateTreeExpansion = items => {\n        return items.map(item => ({\n          ...item,\n          isExpanded: newSet.has(item.id),\n          children: item.children ? updateTreeExpansion(item.children) : []\n        }));\n      };\n      setFolderData(prev => ({\n        ...prev,\n        children: updateTreeExpansion(prev.children)\n      }));\n      return newSet;\n    });\n  };\n  const handleAddChildToFolder = async (parentId, type, name) => {\n    try {\n      await apiClient.createCard({\n        name,\n        parent_id: parentId,\n        is_folder: type === 'folder',\n        category_id: folder.category_id\n      });\n\n      // Refresh the folder data\n      await loadFolderData();\n      if (onRefresh) {\n        onRefresh();\n      }\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error('Error adding child to folder:', err);\n      const errorMessage = err.message || ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.detail) || 'Failed to add item';\n      alert(`Failed to add item: ${errorMessage}`);\n    }\n  };\n  const handleRename = async () => {\n    if (!editName.trim()) {\n      setEditName(folderData.name);\n      setIsEditing(false);\n      return;\n    }\n    if (editName.trim() === folderData.name) {\n      setIsEditing(false);\n      return;\n    }\n    try {\n      setIsSaving(true);\n      await apiClient.updateCard(folderData.id, {\n        name: editName.trim()\n      });\n      onRename(folderData.id, editName.trim());\n      setFolderData({\n        ...folderData,\n        name: editName.trim()\n      });\n      setIsEditing(false);\n      if (onRefresh) {\n        onRefresh();\n      }\n    } catch (err) {\n      console.error('Error renaming folder:', err);\n      setEditName(folderData.name);\n      alert('Failed to rename folder. Please try again.');\n    } finally {\n      setIsSaving(false);\n    }\n  };\n  const handleCancelEdit = () => {\n    setEditName(folderData.name);\n    setIsEditing(false);\n  };\n  const handleKeyDown = e => {\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      handleRename();\n    } else if (e.key === 'Escape') {\n      handleCancelEdit();\n    }\n  };\n  const handleBlur = e => {\n    const relatedTarget = e.relatedTarget;\n    if (relatedTarget && (relatedTarget.closest('.edit-actions') || relatedTarget.closest('button'))) {\n      return;\n    }\n    setTimeout(() => {\n      if (isEditing) {\n        handleRename();\n      }\n    }, 200);\n  };\n  const handleDelete = async () => {\n    try {\n      setIsDeleting(true);\n      await handleConditionalDelete(folderData, () => {\n        onDelete(folderData.id);\n        onClose();\n      }, error => {\n        console.error('Error deleting folder:', error);\n        alert('Failed to delete folder');\n      });\n    } finally {\n      setIsDeleting(false);\n    }\n  };\n  const handleAddChild = async name => {\n    try {\n      await apiClient.createCard({\n        name,\n        parent_id: folderData.id,\n        is_folder: addType === 'folder',\n        category_id: folderData.category_id\n      });\n      await loadFolderData();\n      setShowAddInput(false);\n      if (onRefresh) {\n        onRefresh();\n      }\n    } catch (err) {\n      console.error('Error adding child:', err);\n      alert('Failed to add item');\n    }\n  };\n  const handleAddFolder = () => {\n    setAddType('folder');\n    setShowAddInput(true);\n  };\n  const handleAddCard = () => {\n    setAddType('card');\n    setShowAddInput(true);\n  };\n  const handleAICardSuccess = cardId => {\n    setShowAICardForm(false);\n    loadFolderData();\n    if (onRefresh) {\n      onRefresh();\n    }\n  };\n\n  // Create dropdown menu items for folder\n  const getFolderDropdownItems = () => {\n    const items = [createPracticeFolderAction(() => setShowPracticeSession(true)), {\n      id: 'update-ai',\n      label: 'Update Card using AI',\n      icon: /*#__PURE__*/_jsxDEV(Sparkles, {\n        className: \"h-4 w-4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 15\n      }, this),\n      onClick: async () => {\n        try {\n          // Load folder as card for AI update\n          const cardData = await apiClient.getCard(folderData.id);\n          setFolderCard(cardData);\n          setShowUpdateAI(true);\n        } catch (err) {\n          console.error('Error loading folder for AI update:', err);\n          alert('Failed to load folder data for AI update');\n        }\n      }\n    }, {\n      id: 'move',\n      label: 'Move To...',\n      icon: /*#__PURE__*/_jsxDEV(Move, {\n        className: \"h-4 w-4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 15\n      }, this),\n      onClick: () => setShowMoveToModal(true)\n    }, createEditAction(() => setIsEditing(true)), createDeleteAction(handleDelete)];\n    return items;\n  };\n\n  // Count items\n  const totalItems = folderData.children.length;\n  const folderCount = folderData.children.filter(child => child.is_folder).length;\n  const cardCount = folderData.children.filter(child => !child.is_folder).length;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto p-4\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] flex flex-col\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between p-4 sm:p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-3 flex-1 min-w-0\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-2 bg-blue-100 rounded-lg flex-shrink-0\",\n            children: /*#__PURE__*/_jsxDEV(Folder, {\n              className: \"h-5 w-5 sm:h-6 sm:w-6 text-blue-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1 min-w-0\",\n            children: isEditing ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: editName,\n                onChange: e => setEditName(e.target.value),\n                onBlur: handleBlur,\n                onKeyDown: handleKeyDown,\n                className: \"flex-1 border border-blue-300 rounded-md px-3 py-1 text-lg sm:text-xl font-bold bg-white text-blue-900 focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                autoFocus: true,\n                disabled: isSaving\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 290,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"edit-actions flex items-center space-x-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: handleRename,\n                  disabled: isSaving || !editName.trim(),\n                  className: \"p-1.5 hover:bg-green-100 rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed\",\n                  title: \"Save\",\n                  children: /*#__PURE__*/_jsxDEV(Check, {\n                    className: \"h-5 w-5 text-green-600\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 307,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 301,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: handleCancelEdit,\n                  disabled: isSaving,\n                  className: \"p-1.5 hover:bg-red-100 rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed\",\n                  title: \"Cancel\",\n                  children: /*#__PURE__*/_jsxDEV(X, {\n                    className: \"h-5 w-5 text-red-600\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 315,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 309,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 300,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"text-lg sm:text-xl font-bold text-blue-900 truncate\",\n                children: folderData.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 321,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex flex-wrap items-center gap-2 sm:gap-4 mt-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-xs sm:text-sm text-blue-600\",\n                  children: [totalItems, \" \", totalItems === 1 ? 'item' : 'items']\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 325,\n                  columnNumber: 21\n                }, this), folderCount > 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-xs sm:text-sm text-blue-600 flex items-center\",\n                  children: [/*#__PURE__*/_jsxDEV(Folder, {\n                    className: \"h-3 w-3 mr-1\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 330,\n                    columnNumber: 25\n                  }, this), folderCount, \" \", folderCount === 1 ? 'folder' : 'folders']\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 329,\n                  columnNumber: 23\n                }, this), cardCount > 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-xs sm:text-sm text-blue-600 flex items-center\",\n                  children: [/*#__PURE__*/_jsxDEV(FileText, {\n                    className: \"h-3 w-3 mr-1\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 336,\n                    columnNumber: 25\n                  }, this), cardCount, \" \", cardCount === 1 ? 'card' : 'cards']\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 335,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 324,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 11\n        }, this), !isEditing && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-2 mr-2\",\n          children: [isRootFolder && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleAddFolder,\n            className: \"p-2 hover:bg-blue-100 rounded-lg bg-blue-50 transition-colors\",\n            title: \"Add subfolder\",\n            children: /*#__PURE__*/_jsxDEV(Folder, {\n              className: \"h-4 w-4 text-blue-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleAddCard,\n            className: \"p-2 hover:bg-gray-200 rounded-lg bg-gray-100 transition-colors\",\n            title: \"Add card\",\n            children: /*#__PURE__*/_jsxDEV(Plus, {\n              className: \"h-4 w-4 text-gray-700\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 363,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 13\n        }, this), !isEditing && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mr-2\",\n          children: /*#__PURE__*/_jsxDEV(DropdownMenu, {\n            items: getFolderDropdownItems(),\n            className: \"opacity-100\",\n            disabled: isDeleting\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 371,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: \"p-2 hover:bg-blue-100 rounded-lg transition-colors flex-shrink-0 ml-2\",\n          title: \"Close\",\n          children: /*#__PURE__*/_jsxDEV(X, {\n            className: \"h-5 w-5 text-blue-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 384,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 9\n      }, this), showAddInput && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"px-4 sm:px-6 py-4 bg-gray-50 border-b border-gray-100\",\n        children: /*#__PURE__*/_jsxDEV(AddItemInput, {\n          parentId: folderData.id,\n          type: addType,\n          onSubmit: handleAddChild,\n          onCancel: () => setShowAddInput(false),\n          placeholder: `Add ${addType}...`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 overflow-y-auto p-4 sm:p-6\",\n        children: isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-center py-12\",\n          children: [/*#__PURE__*/_jsxDEV(Loader2, {\n            className: \"h-6 w-6 animate-spin text-blue-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 405,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"ml-2 text-gray-600\",\n            children: \"Loading folder...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 406,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 13\n        }, this) : folderData.children.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col items-center justify-center py-12 text-gray-500\",\n          children: [/*#__PURE__*/_jsxDEV(Folder, {\n            className: \"h-12 w-12 mb-4 opacity-50\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 410,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-lg font-medium mb-2\",\n            children: \"No items in this folder\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 411,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-center mb-4\",\n            children: isRootFolder ? 'Add subfolders or cards to get started' : 'Add cards to get started'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 412,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-center space-x-2\",\n            children: [isRootFolder && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleAddFolder,\n              className: \"px-4 py-2 text-sm font-medium text-blue-600 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors\",\n              children: \"Add Subfolder\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 417,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleAddCard,\n              className: \"px-4 py-2 text-sm font-medium text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors\",\n              children: \"Add Card\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 424,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 415,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 409,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-2\",\n          children: folderData.children.map(item => /*#__PURE__*/_jsxDEV(TreeNode, {\n            item: item,\n            onToggle: handleToggle,\n            onRename: onRename,\n            onDelete: onDelete,\n            onAddChild: handleAddChildToFolder,\n            onMove: onMove,\n            level: 0,\n            categoryId: folder.category_id,\n            categories: categories\n          }, item.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 435,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 433,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 402,\n        columnNumber: 9\n      }, this), showAICardForm && /*#__PURE__*/_jsxDEV(AICardForm, {\n        parentId: folderData.id,\n        parentName: folderData.name,\n        onClose: () => setShowAICardForm(false),\n        onSuccess: handleAICardSuccess\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 454,\n        columnNumber: 11\n      }, this), showMoveToModal && categories.length > 0 && /*#__PURE__*/_jsxDEV(MoveToModal, {\n        item: folderData,\n        categories: categories,\n        onClose: () => setShowMoveToModal(false),\n        onMove: onMove\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 464,\n        columnNumber: 11\n      }, this), showPracticeSession && /*#__PURE__*/_jsxDEV(FolderPracticeSession, {\n        folderId: folderData.id,\n        folderName: folderData.name,\n        categoryId: folderData.category_id,\n        categoryName: (_categories$find = categories.find(cat => cat.id === folderData.category_id)) === null || _categories$find === void 0 ? void 0 : _categories$find.name,\n        onClose: () => setShowPracticeSession(false)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 474,\n        columnNumber: 11\n      }, this), showUpdateAI && folderCard && /*#__PURE__*/_jsxDEV(UpdateCardAI, {\n        card: folderCard,\n        onClose: () => {\n          setShowUpdateAI(false);\n          setFolderCard(null);\n        },\n        onSuccess: async updatedCard => {\n          setShowUpdateAI(false);\n          setFolderCard(null);\n          // Refresh folder data\n          await loadFolderData();\n          if (onRefresh) {\n            onRefresh();\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 485,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 279,\n    columnNumber: 5\n  }, this);\n};\n_s(FolderView, \"/Lnb3ILMn3zAHlAnoybOcoQuJf0=\");\n_c = FolderView;\nvar _c;\n$RefreshReg$(_c, \"FolderView\");","map":{"version":3,"names":["React","useState","useEffect","TreeNode","AddItemInput","AICardForm","UpdateCardAI","DropdownMenu","createEditAction","createDeleteAction","createPracticeFolderAction","FolderPracticeSession","handleConditionalDelete","MoveToModal","X","Folder","Loader2","FileText","Plus","Check","Move","Sparkles","apiClient","cardToTreeItem","jsxDEV","_jsxDEV","Fragment","_Fragment","FolderView","folder","onClose","onRename","onDelete","onMove","onRefresh","categories","_s","_categories$find","folderData","setFolderData","isLoading","setIsLoading","expandedIds","setExpandedIds","Set","isEditing","setIsEditing","editName","setEditName","name","showAddInput","setShowAddInput","addType","setAddType","isDeleting","setIsDeleting","isSaving","setIsSaving","showAICardForm","setShowAICardForm","showMoveToModal","setShowMoveToModal","showPracticeSession","setShowPracticeSession","showUpdateAI","setShowUpdateAI","folderCard","setFolderCard","isRootFolder","parent_id","loadFolderData","id","response","getCardsByParent","children","items","map","card","err","console","error","handleToggle","prev","newSet","has","delete","add","updateTreeExpansion","item","isExpanded","handleAddChildToFolder","parentId","type","createCard","is_folder","category_id","_err$response","_err$response$data","errorMessage","message","data","detail","alert","handleRename","trim","updateCard","handleCancelEdit","handleKeyDown","e","key","preventDefault","handleBlur","relatedTarget","closest","setTimeout","handleDelete","handleAddChild","handleAddFolder","handleAddCard","handleAICardSuccess","cardId","getFolderDropdownItems","label","icon","className","fileName","_jsxFileName","lineNumber","columnNumber","onClick","cardData","getCard","totalItems","length","folderCount","filter","child","cardCount","value","onChange","target","onBlur","onKeyDown","autoFocus","disabled","title","onSubmit","onCancel","placeholder","onToggle","onAddChild","level","categoryId","parentName","onSuccess","folderId","folderName","categoryName","find","cat","updatedCard","_c","$RefreshReg$"],"sources":["/Users/tassiobs/Documents/vocatree-fe/src/components/FolderView.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { TreeItem, CategoryItem } from '../types';\nimport { TreeNode } from './TreeNode';\nimport { AddItemInput } from './AddItemInput';\nimport { AICardForm } from './AICardForm';\nimport { UpdateCardAI } from './UpdateCardAI';\nimport { DropdownMenu, DropdownMenuItem, createEditAction, createDeleteAction, createAICardAction, createPracticeFolderAction } from './DropdownMenu';\nimport { FolderPracticeSession } from './FolderPracticeSession';\nimport { handleConditionalDelete } from '../utils/deleteUtils';\nimport { MoveToModal } from './MoveToModal';\nimport { X, Folder, Loader2, FileText, Plus, Check, Move, Sparkles } from 'lucide-react';\nimport { apiClient } from '../services/api';\nimport { Card } from '../types/api';\nimport { cardToTreeItem } from '../utils/treeUtils';\n\ninterface FolderViewProps {\n  folder: TreeItem;\n  onClose: () => void;\n  onRename: (id: number, newName: string) => void;\n  onDelete: (id: number) => void;\n  onMove: (itemId: number, data: { parent_id?: number | null; category_id?: number | null }) => Promise<void>;\n  onRefresh?: () => void;\n  categories?: CategoryItem[];\n}\n\nexport const FolderView: React.FC<FolderViewProps> = ({\n  folder,\n  onClose,\n  onRename,\n  onDelete,\n  onMove,\n  onRefresh,\n  categories = [],\n}) => {\n  const [folderData, setFolderData] = useState<TreeItem>(folder);\n  const [isLoading, setIsLoading] = useState(false);\n  const [expandedIds, setExpandedIds] = useState<Set<number>>(new Set());\n  const [isEditing, setIsEditing] = useState(false);\n  const [editName, setEditName] = useState(folder.name);\n  const [showAddInput, setShowAddInput] = useState(false);\n  const [addType, setAddType] = useState<'folder' | 'card'>('card');\n  const [isDeleting, setIsDeleting] = useState(false);\n  const [isSaving, setIsSaving] = useState(false);\n  const [showAICardForm, setShowAICardForm] = useState(false);\n  const [showMoveToModal, setShowMoveToModal] = useState(false);\n  const [showPracticeSession, setShowPracticeSession] = useState(false);\n  const [showUpdateAI, setShowUpdateAI] = useState(false);\n  const [folderCard, setFolderCard] = useState<Card | null>(null);\n  const isRootFolder = folder.parent_id === null;\n\n  useEffect(() => {\n    loadFolderData();\n  }, [folder.id]);\n\n  // Sync editName with folder.name when folder changes\n  useEffect(() => {\n    if (!isEditing) {\n      setEditName(folderData.name);\n    }\n  }, [folderData.name, isEditing]);\n\n  const loadFolderData = async () => {\n    try {\n      setIsLoading(true);\n      // Get the folder's direct children\n      const response = await apiClient.getCardsByParent(folder.id);\n      const children: TreeItem[] = response.items.map((card: Card) => cardToTreeItem(card));\n      \n      setFolderData({\n        ...folder,\n        children: children,\n      });\n    } catch (err: any) {\n      console.error('Error loading folder data:', err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleToggle = (id: number) => {\n    setExpandedIds((prev) => {\n      const newSet = new Set(prev);\n      if (newSet.has(id)) {\n        newSet.delete(id);\n      } else {\n        newSet.add(id);\n      }\n      \n      // Update the tree items with new expansion state\n      const updateTreeExpansion = (items: TreeItem[]): TreeItem[] => {\n        return items.map((item) => ({\n          ...item,\n          isExpanded: newSet.has(item.id),\n          children: item.children ? updateTreeExpansion(item.children) : [],\n        }));\n      };\n      \n      setFolderData((prev) => ({\n        ...prev,\n        children: updateTreeExpansion(prev.children),\n      }));\n      \n      return newSet;\n    });\n  };\n\n  const handleAddChildToFolder = async (parentId: number, type: 'folder' | 'card', name: string) => {\n    try {\n      await apiClient.createCard({\n        name,\n        parent_id: parentId,\n        is_folder: type === 'folder',\n        category_id: folder.category_id,\n      });\n\n      // Refresh the folder data\n      await loadFolderData();\n      if (onRefresh) {\n        onRefresh();\n      }\n    } catch (err: any) {\n      console.error('Error adding child to folder:', err);\n      const errorMessage = err.message || err.response?.data?.detail || 'Failed to add item';\n      alert(`Failed to add item: ${errorMessage}`);\n    }\n  };\n\n  const handleRename = async () => {\n    if (!editName.trim()) {\n      setEditName(folderData.name);\n      setIsEditing(false);\n      return;\n    }\n\n    if (editName.trim() === folderData.name) {\n      setIsEditing(false);\n      return;\n    }\n\n    try {\n      setIsSaving(true);\n      await apiClient.updateCard(folderData.id, { name: editName.trim() });\n      onRename(folderData.id, editName.trim());\n      setFolderData({ ...folderData, name: editName.trim() });\n      setIsEditing(false);\n      if (onRefresh) {\n        onRefresh();\n      }\n    } catch (err: any) {\n      console.error('Error renaming folder:', err);\n      setEditName(folderData.name);\n      alert('Failed to rename folder. Please try again.');\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  const handleCancelEdit = () => {\n    setEditName(folderData.name);\n    setIsEditing(false);\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      handleRename();\n    } else if (e.key === 'Escape') {\n      handleCancelEdit();\n    }\n  };\n\n  const handleBlur = (e: React.FocusEvent<HTMLInputElement>) => {\n    const relatedTarget = e.relatedTarget as HTMLElement;\n    if (relatedTarget && (relatedTarget.closest('.edit-actions') || relatedTarget.closest('button'))) {\n      return;\n    }\n    setTimeout(() => {\n      if (isEditing) {\n        handleRename();\n      }\n    }, 200);\n  };\n\n  const handleDelete = async () => {\n    try {\n      setIsDeleting(true);\n      await handleConditionalDelete(\n        folderData,\n        () => {\n          onDelete(folderData.id);\n          onClose();\n        },\n        (error) => {\n          console.error('Error deleting folder:', error);\n          alert('Failed to delete folder');\n        }\n      );\n    } finally {\n      setIsDeleting(false);\n    }\n  };\n\n  const handleAddChild = async (name: string) => {\n    try {\n      await apiClient.createCard({\n        name,\n        parent_id: folderData.id,\n        is_folder: addType === 'folder',\n        category_id: folderData.category_id,\n      });\n\n      await loadFolderData();\n      setShowAddInput(false);\n      if (onRefresh) {\n        onRefresh();\n      }\n    } catch (err: any) {\n      console.error('Error adding child:', err);\n      alert('Failed to add item');\n    }\n  };\n\n  const handleAddFolder = () => {\n    setAddType('folder');\n    setShowAddInput(true);\n  };\n\n  const handleAddCard = () => {\n    setAddType('card');\n    setShowAddInput(true);\n  };\n\n  const handleAICardSuccess = (cardId: number) => {\n    setShowAICardForm(false);\n    loadFolderData();\n    if (onRefresh) {\n      onRefresh();\n    }\n  };\n\n  // Create dropdown menu items for folder\n  const getFolderDropdownItems = (): DropdownMenuItem[] => {\n    const items: DropdownMenuItem[] = [\n      createPracticeFolderAction(() => setShowPracticeSession(true)),\n      {\n        id: 'update-ai',\n        label: 'Update Card using AI',\n        icon: <Sparkles className=\"h-4 w-4\" />,\n        onClick: async () => {\n          try {\n            // Load folder as card for AI update\n            const cardData = await apiClient.getCard(folderData.id);\n            setFolderCard(cardData);\n            setShowUpdateAI(true);\n          } catch (err: any) {\n            console.error('Error loading folder for AI update:', err);\n            alert('Failed to load folder data for AI update');\n          }\n        },\n      },\n      {\n        id: 'move',\n        label: 'Move To...',\n        icon: <Move className=\"h-4 w-4\" />,\n        onClick: () => setShowMoveToModal(true),\n      },\n      createEditAction(() => setIsEditing(true)),\n      createDeleteAction(handleDelete),\n    ];\n    return items;\n  };\n\n  // Count items\n  const totalItems = folderData.children.length;\n  const folderCount = folderData.children.filter(child => child.is_folder).length;\n  const cardCount = folderData.children.filter(child => !child.is_folder).length;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto p-4\">\n      <div className=\"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] flex flex-col\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-4 sm:p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50\">\n          <div className=\"flex items-center space-x-3 flex-1 min-w-0\">\n            <div className=\"p-2 bg-blue-100 rounded-lg flex-shrink-0\">\n              <Folder className=\"h-5 w-5 sm:h-6 sm:w-6 text-blue-600\" />\n            </div>\n            <div className=\"flex-1 min-w-0\">\n              {isEditing ? (\n                <div className=\"flex items-center space-x-2\">\n                  <input\n                    type=\"text\"\n                    value={editName}\n                    onChange={(e) => setEditName(e.target.value)}\n                    onBlur={handleBlur}\n                    onKeyDown={handleKeyDown}\n                    className=\"flex-1 border border-blue-300 rounded-md px-3 py-1 text-lg sm:text-xl font-bold bg-white text-blue-900 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                    autoFocus\n                    disabled={isSaving}\n                  />\n                  <div className=\"edit-actions flex items-center space-x-1\">\n                    <button\n                      onClick={handleRename}\n                      disabled={isSaving || !editName.trim()}\n                      className=\"p-1.5 hover:bg-green-100 rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n                      title=\"Save\"\n                    >\n                      <Check className=\"h-5 w-5 text-green-600\" />\n                    </button>\n                    <button\n                      onClick={handleCancelEdit}\n                      disabled={isSaving}\n                      className=\"p-1.5 hover:bg-red-100 rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n                      title=\"Cancel\"\n                    >\n                      <X className=\"h-5 w-5 text-red-600\" />\n                    </button>\n                  </div>\n                </div>\n              ) : (\n                <>\n                  <h2 className=\"text-lg sm:text-xl font-bold text-blue-900 truncate\">\n                    {folderData.name}\n                  </h2>\n                  <div className=\"flex flex-wrap items-center gap-2 sm:gap-4 mt-1\">\n                    <p className=\"text-xs sm:text-sm text-blue-600\">\n                      {totalItems} {totalItems === 1 ? 'item' : 'items'}\n                    </p>\n                    {folderCount > 0 && (\n                      <p className=\"text-xs sm:text-sm text-blue-600 flex items-center\">\n                        <Folder className=\"h-3 w-3 mr-1\" />\n                        {folderCount} {folderCount === 1 ? 'folder' : 'folders'}\n                      </p>\n                    )}\n                    {cardCount > 0 && (\n                      <p className=\"text-xs sm:text-sm text-blue-600 flex items-center\">\n                        <FileText className=\"h-3 w-3 mr-1\" />\n                        {cardCount} {cardCount === 1 ? 'card' : 'cards'}\n                      </p>\n                    )}\n                  </div>\n                </>\n              )}\n            </div>\n          </div>\n          \n          {/* Add buttons */}\n          {!isEditing && (\n            <div className=\"flex items-center space-x-2 mr-2\">\n              {isRootFolder && (\n                <button\n                  onClick={handleAddFolder}\n                  className=\"p-2 hover:bg-blue-100 rounded-lg bg-blue-50 transition-colors\"\n                  title=\"Add subfolder\"\n                >\n                  <Folder className=\"h-4 w-4 text-blue-600\" />\n                </button>\n              )}\n              <button\n                onClick={handleAddCard}\n                className=\"p-2 hover:bg-gray-200 rounded-lg bg-gray-100 transition-colors\"\n                title=\"Add card\"\n              >\n                <Plus className=\"h-4 w-4 text-gray-700\" />\n              </button>\n            </div>\n          )}\n\n          {/* Actions dropdown menu */}\n          {!isEditing && (\n            <div className=\"mr-2\">\n              <DropdownMenu\n                items={getFolderDropdownItems()}\n                className=\"opacity-100\"\n                disabled={isDeleting}\n              />\n            </div>\n          )}\n\n          <button\n            onClick={onClose}\n            className=\"p-2 hover:bg-blue-100 rounded-lg transition-colors flex-shrink-0 ml-2\"\n            title=\"Close\"\n          >\n            <X className=\"h-5 w-5 text-blue-600\" />\n          </button>\n        </div>\n\n        {/* Add item input */}\n        {showAddInput && (\n          <div className=\"px-4 sm:px-6 py-4 bg-gray-50 border-b border-gray-100\">\n            <AddItemInput\n              parentId={folderData.id}\n              type={addType}\n              onSubmit={handleAddChild}\n              onCancel={() => setShowAddInput(false)}\n              placeholder={`Add ${addType}...`}\n            />\n          </div>\n        )}\n\n        {/* Content */}\n        <div className=\"flex-1 overflow-y-auto p-4 sm:p-6\">\n          {isLoading ? (\n            <div className=\"flex items-center justify-center py-12\">\n              <Loader2 className=\"h-6 w-6 animate-spin text-blue-600\" />\n              <span className=\"ml-2 text-gray-600\">Loading folder...</span>\n            </div>\n          ) : folderData.children.length === 0 ? (\n            <div className=\"flex flex-col items-center justify-center py-12 text-gray-500\">\n              <Folder className=\"h-12 w-12 mb-4 opacity-50\" />\n              <p className=\"text-lg font-medium mb-2\">No items in this folder</p>\n              <p className=\"text-sm text-center mb-4\">\n                {isRootFolder ? 'Add subfolders or cards to get started' : 'Add cards to get started'}\n              </p>\n              <div className=\"flex items-center justify-center space-x-2\">\n                {isRootFolder && (\n                  <button\n                    onClick={handleAddFolder}\n                    className=\"px-4 py-2 text-sm font-medium text-blue-600 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors\"\n                  >\n                    Add Subfolder\n                  </button>\n                )}\n                <button\n                  onClick={handleAddCard}\n                  className=\"px-4 py-2 text-sm font-medium text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors\"\n                >\n                  Add Card\n                </button>\n              </div>\n            </div>\n          ) : (\n            <div className=\"space-y-2\">\n              {folderData.children.map((item) => (\n                <TreeNode\n                  key={item.id}\n                  item={item}\n                  onToggle={handleToggle}\n                  onRename={onRename}\n                  onDelete={onDelete}\n                  onAddChild={handleAddChildToFolder}\n                  onMove={onMove}\n                  level={0}\n                  categoryId={folder.category_id}\n                  categories={categories}\n                />\n              ))}\n            </div>\n          )}\n        </div>\n\n        {/* AI Card Form Modal */}\n        {showAICardForm && (\n          <AICardForm\n            parentId={folderData.id}\n            parentName={folderData.name}\n            onClose={() => setShowAICardForm(false)}\n            onSuccess={handleAICardSuccess}\n          />\n        )}\n\n        {/* Move To Modal */}\n        {showMoveToModal && categories.length > 0 && (\n          <MoveToModal\n            item={folderData}\n            categories={categories}\n            onClose={() => setShowMoveToModal(false)}\n            onMove={onMove}\n          />\n        )}\n\n        {/* Folder Practice Session */}\n        {showPracticeSession && (\n          <FolderPracticeSession\n            folderId={folderData.id}\n            folderName={folderData.name}\n            categoryId={folderData.category_id}\n            categoryName={categories.find(cat => cat.id === folderData.category_id)?.name}\n            onClose={() => setShowPracticeSession(false)}\n          />\n        )}\n\n        {/* Update Card AI Modal */}\n        {showUpdateAI && folderCard && (\n          <UpdateCardAI\n            card={folderCard}\n            onClose={() => {\n              setShowUpdateAI(false);\n              setFolderCard(null);\n            }}\n            onSuccess={async (updatedCard: Card) => {\n              setShowUpdateAI(false);\n              setFolderCard(null);\n              // Refresh folder data\n              await loadFolderData();\n              if (onRefresh) {\n                onRefresh();\n              }\n            }}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}